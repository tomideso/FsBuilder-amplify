{"version":3,"sources":["tabs.ts"],"names":["FsLibrary","prototype","tabs","tabComponent","customTabName","tabContent","tabName","resetIx","cms","getMasterCollection","testimonials","slice","call","querySelectorAll","tabMenu","document","querySelector","tabPane","children","tabLink","getElementsByTagName","Webflow","window","push","___toggledInitTab___","prefix","getPrefix","href","classList","remove","tabLinkClassNames","className","tabContentClassNames","innerHTML","Promise","all","initTabs","then","res","ready","reinitializeWebflow","map","element","index","name","getRandomString","CTabName","newLink","getTabLink","classes","content","outerHTML","newPane","getTabPane","resolve","tab","pane","isFirst","classNames","tabIndex","val","match","a","Math","random","String","substr"],"mappings":"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","file":"tabs.js","sourcesContent":["import { FsLibrary } from \"./fsLibrary\";\n\nFsLibrary.prototype.tabs = function ({\n  tabComponent,\n  tabContent: customTabName,\n  tabName,\n  resetIx = true,\n}) {\n  const cms = this.getMasterCollection();\n  const testimonials = [].slice.call(cms.querySelectorAll(\".w-dyn-item>*\"));\n\n  const tabMenu = document.querySelector(tabComponent + \" .w-tab-menu\");\n  const tabContent = document.querySelector(tabComponent + \" .w-tab-content\");\n\n  const tabPane = tabContent.children[0];\n  const tabLink = tabMenu.getElementsByTagName(\"a\")[0];\n\n  const Webflow = (<any>window).Webflow || [];\n\n  Webflow.push(() => {\n    if ((<any>window).___toggledInitTab___) {\n      return;\n    }\n\n    const prefix = getPrefix(tabLink.href);\n    tabLink.classList.remove(\"w--current\");\n    tabPane.classList.remove(\"w--tab-active\");\n\n    const tabLinkClassNames = tabLink.className;\n    const tabContentClassNames = tabPane.className;\n\n    // clear tabMenu and tabContent\n\n    tabMenu.innerHTML = \"\";\n    tabContent.innerHTML = \"\";\n    Promise.all(initTabs(prefix, tabLinkClassNames, tabContentClassNames)).then(\n      (res) => {\n        (<any>window).___toggledInitTab___ = true;\n        (<any>window).Webflow.ready();\n        !!resetIx && this.reinitializeWebflow();\n      }\n    );\n  });\n\n  const initTabs = (prefix, tabLinkClassNames, tabContentClassNames) => {\n    // appends new contents\n    return testimonials.map((element, index) => {\n      const name =\n        (element.querySelector(tabName) || {}).innerHTML || getRandomString();\n      const CTabName = element.querySelector(customTabName)\n        ? element.querySelector(customTabName).innerHTML\n        : \"\";\n\n      const newLink = getTabLink({\n        name,\n        CTabName,\n        prefix,\n        index,\n        classes: tabLinkClassNames,\n      });\n      tabMenu.innerHTML += newLink;\n\n      const content = element.outerHTML;\n      const newPane = getTabPane({\n        name,\n        prefix,\n        index,\n        classes: tabContentClassNames,\n        content,\n      });\n      tabContent.innerHTML += newPane;\n      return Promise.resolve();\n    });\n  };\n};\n\nconst getTabLink = ({ name, CTabName = \"\", prefix, index, classes }) => {\n  const tab = prefix + \"-tab-\" + index;\n  const pane = prefix + \"-pane-\" + index;\n\n  const isFirst = index == 0;\n\n  let classNames = classes;\n  if (isFirst) {\n    classNames += \" w--current \";\n  }\n\n  const tabIndex = isFirst ? \"\" : `tabindex='-1'`;\n\n  return `<a data-w-tab=\"${name}\" class=\"${classNames}\" id=\"${tab}\" href=\"#${pane}\"\n   role=\"tab\"\n   aria-controls=\"${pane}\"\n   aria-selected=\"${isFirst}\" ${tabIndex}>\n          <div>${CTabName || name}</div>\n          </a>`;\n};\n\nconst getTabPane = ({ name, prefix, index, content, classes }) => {\n  const tab = prefix + \"-tab-\" + index;\n  const pane = prefix + \"-pane-\" + index;\n\n  const isFirst = index == 0;\n\n  let classNames = classes;\n  if (isFirst) {\n    classNames += \" w--tab-active \";\n  }\n\n  return `<div data-w-tab=\"${name}\" class=\"${classNames}\" id=\"${pane}\" role=\"tabpanel\" aria-labelledby=\"${tab}\">\n${content}\n    </div>`;\n};\n\nconst getPrefix = (val) => {\n  return val.match(/(w-tabs-[0-9]{1}-data-w)/gi)[0];\n};\n\nconst getRandomString = () => {\n  const a = Math.random();\n  return String(a).substr(2);\n};\n"]}