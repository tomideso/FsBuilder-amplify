{"version":3,"sources":["index_.ts","index_.js"],"names":["FsLibrary","cms_selector","opt","type","className","animation","enable","duration","easing","effects","queue","index","animationStyle","tinyImgBase64","lazyLoad","window","Webflow","destroy","ready","lazy","setLazy","slice","call","document","querySelectorAll","i","length","classList","contains","remove","cleanLazy","filter","elem","transform","replace","head","getElementsByTagName","lazyLoadCss","innerHTML","style","createElement","appendChild","styleSheet","cssText","createTextNode","cmsList","nextSibling","nextElementSibling","querySelector","indexSet","setNextButtonIndex","visible_collection","isVisible","nextButton","reduce","curr","item","aNextButton","outerHTML","join","forEach","parentElement","reinitializeWebflow","url","Promise","resolve","xhr","XMLHttpRequest","open","send","onload","status","response","then","res","data","newDoc","Date","now","collection","nextHref","setLoadmoreHref","href","appendToCms","children","hidden_collections","getLoadmoreHref","master_collection","getMasterCollection","element","add","whichAnimationEvent","addClass","addclasses","addClassConfig","nestConfig","nest","hrefButton","setAttribute","selector","e","getHiddenCollections","map","val","cloneNode","parentNode","config","button","loadAll","resetIx","setHiddenCollections","makeStyleSheet","removeAttribute","busy","onclick","evt","initFetch","addEventListener","event","recursive","getAttribute","getNextData","appendPaginatedData","nextcollection","shift","firstElementChild","aHref","classArray","frequency","start","parent","classNames","target","classTarget","alt","classToAdd","list","targerIsDirectChild","addon","j","toggle","filterArray","activeClass","cms_filter","Object","assign","filter_type","test","String","indexOf","filterActive","filterQueue","get_cms_items","Array","isArray","prevClicked","filter_option","filterType","filter_group","filterWrapper","assignChangeEventToButtons","conditionalReset","filter_text","isEmpty","trim","tag","values","includes","id","tag_element","tagName","debounce","selectedOptions","value","initFilter","wildcard","checked","currentTarget","active","push","filterHelper","Animate","methods","animate","findAndMatchFilterText","nextAnimation","search_result","search","result","re","RegExp","valid","textContent","clonedItem","display","a","child","k","sortTrigger","sortReverse","triggerElem","triggerTag","sortTarget","sortHelper","removeActiveClassFromTriggers","previouslyClicked","isReversed","collator","Intl","Collator","numeric","sensitivity","initSort","sortMasterCollection","sort","b","x","y","compare","sortedElem","insertBefore","firstChild","textList","nestSource","nestTarget","setNestConfig","master_collections","from","sourceLinks","textArray","textElem","tags","tagsArry","split","link","regex","tabComponent","tabName","cms","testimonials","tabMenu","tabContent","tabPane","tabLink","control","console","log","whichTransitionEvent","t","el","transitions","transition","OTransition","MozTransition","WebkitTransition","undefined","animations","OAnimationn","MozAnimationn","WebkitAnimationn","callback","wait","timeout","args","context","clearTimeout","setTimeout","apply"],"mappings":"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","file":"index_.js","sourcesContent":["import Animate from \"./animate\";\nimport { once } from \"../js/util/index\";\nimport {\n  registerListener,\n  isInViewport,\n  isVisible,\n  createDocument,\n  escapeRegExp,\n} from \"./utility\";\n\nclass FsLibrary {\n  constructor(\n    cms_selector: string,\n    opt: LazyLoad = { type: 1, className: \"image\" }\n  ) {\n    //   this.lazyLoadOpt={type:1,...opt};\n    opt && this.lazyLoad(cms_selector, opt.className);\n\n    this.cms_selector = cms_selector;\n  }\n  private indexSet: boolean;\n\n  private cms_selector: string;\n\n  private animation: Animatn = {\n    enable: true,\n    duration: 250,\n    easing: \"ease-in-out\",\n    effects: \"translate(0px,0px)\",\n    queue: true,\n  };\n\n  private addClass: boolean;\n\n  private nestConfig;\n\n  private index: number = 0;\n\n  private hidden_collections: any[];\n\n  private addClassConfig: AddClass;\n\n  private animationStyle: string = `\n        \n\n    @keyframes fade-in {\n        0% {\n            opacity: 0;\n           transform:{{transform}};\n        }\n        100% {\n            transform:translate(0) rotate3d(0) rotate(0) scale(1);\n            opacity: 1;\n        }\n      }\n      \n      .fslib-fadeIn {\n        animation-name: fade-in;\n        animation-duration: {{duration}}s;\n        animation-iteration-count: 1;\n        animation-timing-function: {{easing}};\n        animation-fill-mode: forwards;\n      }\n`;\n\n  private tinyImgBase64 = `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`;\n\n  private reinitializeWebflow() {\n    (<any>window).Webflow.destroy();\n    (<any>window).Webflow.ready();\n    // (<any>window).Webflow.require(\"ix2\").init();\n  }\n\n  private lazyLoad(cms_selector, className) {\n    let lazy: any = [];\n    registerListener(\"load\", setLazy);\n    registerListener(\"load\", lazyLoad);\n    registerListener(\"scroll\", lazyLoad);\n    registerListener(\"resize\", lazyLoad);\n\n    function setLazy() {\n      lazy = [].slice.call(\n        document.querySelectorAll(`${cms_selector} .${className}`)\n      );\n    }\n\n    function lazyLoad() {\n      for (var i = 0; i < lazy.length; i++) {\n        if (isInViewport(lazy[i])) {\n          // if (lazy[i].getAttribute('data-src')){\n          //     lazy[i].src = lazy[i].getAttribute('data-src');\n          //     lazy[i].removeAttribute('data-src');\n          // }\n\n          if (lazy[i].classList.contains(className)) {\n            lazy[i].classList.remove(className);\n          }\n        }\n      }\n\n      cleanLazy();\n    }\n\n    function cleanLazy() {\n      // lazy = [].filter.call(lazy, function(l){ return l.getAttribute('data-src');});\n      lazy = [].filter.call(lazy, (elem) => {\n        return elem.classList.contains(className);\n      });\n    }\n  }\n\n  private makeStyleSheet({\n    duration = 1,\n    easing = \"ease-in-out\",\n    transform = \"translate(0)\",\n  }) {\n    this.animationStyle = this.animationStyle.replace(\n      \"{{duration}}\",\n      \"\" + duration\n    );\n    this.animationStyle = this.animationStyle.replace(\"{{ease}}\", easing);\n    this.animationStyle = this.animationStyle.replace(\n      \"{{transform}}\",\n      transform\n    );\n\n    const head = document.head || document.getElementsByTagName(\"head\")[0];\n    const lazyLoadCss = `<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/progressive-image.js/dist/progressive-image.css\">`;\n    head.innerHTML += lazyLoadCss;\n    const style: any = document.createElement(\"style\");\n    head.appendChild(style);\n\n    style.type = \"text/css\";\n    if (style.styleSheet) {\n      // This is required for IE8 and below.\n      style.styleSheet.cssText = this.animationStyle;\n    } else {\n      style.appendChild(document.createTextNode(this.animationStyle));\n    }\n\n    return style;\n  }\n\n  private setNextButtonIndex() {\n    const cmsList = document.querySelectorAll(this.cms_selector);\n\n    for (let i = 0; i < cmsList.length; i++) {\n      const nextSibling = cmsList[i].nextElementSibling;\n      if (\n        nextSibling &&\n        isVisible(nextSibling) &&\n        nextSibling.querySelector(\"w-pagination-next\")\n      ) {\n        this.index = i;\n      }\n    }\n    this.indexSet = true;\n  }\n\n  /**\n   * Combine all the collection items into one collection.\n   */\n  public combine() {\n    this.setNextButtonIndex();\n    //get all collections\n    const visible_collection: any = [].slice\n      .call(document.querySelectorAll(this.cms_selector))\n      .filter(isVisible);\n    let nextButton = null;\n\n    //copies the cms items into the first collection list\n    visible_collection[0].innerHTML = visible_collection\n      .reduce((curr, item) => {\n        //gets all the items\n        const aNextButton = item.nextElementSibling;\n        if (aNextButton && isVisible(aNextButton) && !nextButton) {\n          nextButton = aNextButton.outerHTML;\n        }\n        return [...curr, item.innerHTML];\n      }, [])\n      .join(\"\");\n\n    if (nextButton) {\n      nextButton.outerHTML = nextButton.outerHTML + nextButton;\n    }\n\n    //deletes the rest collection list\n    visible_collection.forEach((elem: Element, i: number) => {\n      if (i > 0) {\n        elem.parentElement.outerHTML = \"\";\n      }\n      this.reinitializeWebflow();\n    });\n  }\n\n  private getMasterCollection() {\n    return document.querySelector(this.cms_selector);\n  }\n\n  private getNextData(url) {\n    return new Promise((resolve) => {\n      let xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url);\n      xhr.send();\n      xhr.onload = () => {\n        if (xhr.status == 200) {\n          // done(xhr.response);\n          return resolve(xhr.response);\n        }\n      };\n    }).then((res) => res);\n  }\n\n  private appendPaginatedData(data: string) {\n    const newDoc = createDocument(data, \"newDoc\" + Date.now());\n    const collection = newDoc.querySelectorAll(this.cms_selector)[this.index];\n    const nextHref = collection.parentElement.querySelector(\n      \".w-pagination-next\"\n    );\n    nextHref\n      ? this.setLoadmoreHref((<any>nextHref).href)\n      : this.setLoadmoreHref(\"\");\n    collection && this.appendToCms(collection.children);\n\n    if (!this.hidden_collections.length && !nextHref) {\n      (<any>this.getLoadmoreHref()).outerHTML = \"\";\n    }\n  }\n\n  private appendToCms(collection) {\n    const master_collection = this.getMasterCollection();\n\n    [].slice.call(collection).forEach((element) => {\n      element.classList.add(\"fslib-fadeIn\");\n\n      once(element, whichAnimationEvent(), ({ type }) => {\n        element.classList.remove(\"fslib-fadeIn\");\n      });\n\n      master_collection.appendChild(element);\n      if (this.addClass) {\n        this.addclasses(this.addClassConfig);\n      }\n    });\n\n    if (this.nestConfig) {\n      this.nest(this.nestConfig);\n    }\n  }\n\n  private setLoadmoreHref(url) {\n    const master_collection = this.getMasterCollection();\n    const hrefButton = master_collection.parentElement.querySelector(\n      \"a.w-pagination-next\"\n    );\n    hrefButton.setAttribute(\"data-href\", url || (<any>hrefButton).href);\n    return hrefButton;\n  }\n\n  private getLoadmoreHref(selector?) {\n    const master_collection = this.getMasterCollection();\n    const hrefButton = master_collection.parentElement.querySelector(\n      selector || \"a.w-pagination-next\"\n    );\n    return hrefButton;\n  }\n\n  private getHiddenCollections(): any[] {\n    return [].slice\n      .call(document.querySelectorAll(this.cms_selector))\n      .filter((e) => !isVisible(e));\n  }\n\n  private setHiddenCollections() {\n    const collection = this.getHiddenCollections();\n    this.hidden_collections = collection.map((val) =>\n      val.parentElement.cloneNode(true)\n    );\n\n    collection.forEach((val) => (val.parentNode.outerHTML = \"\"));\n  }\n\n  public loadmore(\n    config: LoadMore = {\n      button: \"a.w-pagination-next\",\n      loadAll: false,\n      resetIx: true,\n      animation: this.animation,\n    }\n  ): void {\n    if (!this.indexSet) {\n      this.setNextButtonIndex();\n    }\n\n    this.setHiddenCollections();\n\n    if (config.animation) {\n      const effects = config.animation.effects.replace(\"fade\", \"\");\n      let { duration, easing } = config.animation;\n      duration = duration ? duration / 1000 : 1;\n      easing = easing || \"linear\";\n      this.makeStyleSheet({ duration, easing, transform: effects });\n    } else {\n      this.makeStyleSheet({});\n    }\n\n    const { button, resetIx = true, loadAll = false } = config;\n\n    const nextButton = this.getLoadmoreHref(button);\n    nextButton.setAttribute(\"data-href\", (<any>nextButton).href);\n    nextButton.removeAttribute(\"href\");\n\n    let busy = false;\n\n    (<any>nextButton).onclick = (evt) => {\n      initFetch();\n    };\n\n    document.addEventListener(\"DOMContentLoaded\", function (event) {\n      loadAll && initFetch(true);\n    });\n\n    const initFetch = (recursive = false) => {\n      if (busy) return false;\n\n      const href = nextButton.getAttribute(\"data-href\");\n\n      busy = true;\n\n      if (href) {\n        return this.getNextData(href).then((res) => {\n          //enable button\n          this.appendPaginatedData(<any>res);\n          busy = false;\n\n          if (resetIx) {\n            this.reinitializeWebflow();\n          }\n\n          if (recursive) {\n            initFetch(true);\n          }\n        });\n      }\n\n      const nextcollection = this.hidden_collections.shift();\n\n      if (nextcollection) {\n        this.appendToCms(nextcollection.firstElementChild.children);\n        const aHref = nextcollection.querySelector(\".w-pagination-next\");\n        this.setLoadmoreHref(aHref.href);\n        this.index++;\n        busy = false;\n\n        if (recursive) {\n          initFetch(true);\n        }\n      }\n      if (resetIx) {\n        this.reinitializeWebflow();\n      }\n    };\n  }\n\n  /**\n   *\n   * @param container The css selector of the parent container elem of the list you want to add classnames to.\n   * @param config  defined as\n   *  {\n   *     classArray: Array<AltClass>; //list of classnames you want to add\n   *     frequency: number; //The frequency or order of addition of class to the list\n   *     start: number; //position of list item to start with\n   * }\n   */\n  public addclasses(\n    config: AddClass = { classArray: [], frequency: 2, start: 1 }\n  ): void {\n    const parent: any = document.querySelector(this.cms_selector);\n    const { frequency, start, classArray: classNames } = config;\n\n    this.addClassConfig = config;\n    this.addClass = true;\n\n    if (frequency < 0) {\n      throw \"unaccepted value passed as frequency\";\n    } else if (start < 1) {\n      throw \"unaccepted value passed as start\";\n    }\n\n    classNames.map(({ classTarget: target, classToAdd: alt }) => {\n      let list = parent.querySelectorAll(target);\n      let targerIsDirectChild = true;\n\n      if (parent.children[0] != list[0]) {\n        targerIsDirectChild = false;\n        list = parent.children;\n      }\n\n      const addon = alt.replace(/\\./g, \"\");\n\n      for (let j = start - 1; j < list.length; j += frequency) {\n        if (targerIsDirectChild) {\n          list[j].classList.toggle(addon);\n        } else {\n          list[j].querySelectorAll(target).forEach((elem) => {\n            elem.classList.toggle(addon);\n          });\n        }\n\n        if (frequency == 0) {\n          break;\n        }\n\n        this.reinitializeWebflow();\n      }\n    });\n  }\n\n  /**\n   *\n   * @param cms_selector\n   */\n  public filter(\n    config = {\n      filterArray: [],\n      animation: this.animation,\n      activeClass: \"active\",\n    }\n  ) {\n    let { filterArray: cms_filter, animation, activeClass } = config;\n    activeClass = activeClass || \"active\";\n\n    animation = { ...this.animation, ...animation };\n\n    let filter_type = typeof cms_filter == \"string\" ? \"exclusive\" : \"multi\";\n\n    if (animation) {\n      animation.enable = !/^false$/.test(String(animation.enable));\n      const effects = animation.effects.replace(\"fade\", \"\");\n      animation.effects = effects;\n\n      if (animation.effects.indexOf(\"translate\") < 0) {\n        animation.effects += \" translate(0px,0px)  \";\n      }\n      this.animation = animation;\n    }\n    animation = this.animation;\n\n    let filterActive = false;\n    let filterQueue = [];\n    let filter: Array<{ [key: string]: string }> = []; //2D array to hold categories of filter selectors and their corresponding\n\n    //get all collections\n\n    const get_cms_items: any = () =>\n      [].slice.call(document.querySelectorAll(this.cms_selector));\n\n    if (Array.isArray(cms_filter)) {\n      cms_filter.map((val, index) => {\n        let prevClicked;\n        const { filterType: filter_option } = val;\n\n        const filter_group = [].slice.call(\n          document.querySelectorAll(`${(<any>val).filterWrapper} [filter-by]`)\n        );\n        assignChangeEventToButtons({\n          index,\n          prevClicked,\n          filter_option,\n          filter_group,\n        });\n      });\n    } else if (typeof cms_filter == \"string\") {\n      let prevClicked;\n      const filter_group = [].slice.call(\n        document.querySelectorAll(`${cms_filter} [filter-by]`)\n      );\n      assignChangeEventToButtons({ index: 0, prevClicked, filter_group });\n    } else {\n      throw \"Incorrect type passed as cms_filter\";\n    }\n\n    function conditionalReset(filter_text, index) {\n      const isEmpty = !filter_text.trim();\n      const tag = Object.values(filter[index]);\n\n      if (isEmpty && tag.includes(filter_text)) {\n        return false;\n      }\n\n      if (isEmpty && !tag.length) {\n        return false;\n      }\n      return true;\n    }\n\n    function assignChangeEventToButtons({\n      index,\n      prevClicked,\n      filter_option = filter_type,\n      filter_group,\n    }) {\n      filter[index] = {}; //initialise default values\n      filter_group.map((elem, j) => {\n        const id = `${index}${j}`;\n        const tag_element = elem && elem.tagName;\n\n        if (tag_element == \"SELECT\") {\n          (<any>elem).addEventListener(\n            \"change\",\n            debounce((event) => {\n              const filter_text = event.target.selectedOptions[0].value || \"\";\n\n              conditionalReset(filter_text, index) &&\n                initFilter({\n                  filter_option,\n                  id,\n                  index,\n                  filter_text,\n                  wildcard: true,\n                });\n            }, 500)\n          );\n        } else if (tag_element == \"INPUT\") {\n          //handle checkbox and radio button\n\n          switch (elem.type) {\n            case \"text\":\n              (<any>elem).addEventListener(\n                \"input\",\n                debounce((event) => {\n                  const filter_text = event.target.value;\n                  conditionalReset(filter_text, index) &&\n                    initFilter({\n                      filter_option,\n                      id,\n                      index,\n                      filter_text,\n                      wildcard: true,\n                    });\n                }, 500)\n              );\n              break;\n            default:\n              (<any>elem).addEventListener(\"change\", (event) => {\n                const filter_text = !event.target.checked\n                  ? \"\"\n                  : event.currentTarget.getAttribute(\"filter-by\") || \"\";\n                conditionalReset(filter_text, index) &&\n                  initFilter({ filter_option, id, index, filter_text });\n              });\n              break;\n          }\n        } else {\n          (<any>elem).onclick = (event) => {\n            const active = event.currentTarget.className;\n\n            //only one element should have active class for or\n            if (\n              /^exclusive$/i.test(filter_type) ||\n              /^exclusive$/i.test(filter_option)\n            ) {\n              if (prevClicked) prevClicked.classList.remove(activeClass);\n            }\n\n            prevClicked = event.currentTarget;\n\n            if (active.includes(activeClass)) {\n              prevClicked.classList.remove(activeClass);\n            } else {\n              prevClicked.classList.add(activeClass);\n            }\n\n            const filter_text = prevClicked.getAttribute(\"filter-by\") || \"\";\n\n            //prevent further filter if filter is empty and reset button is clicked.\n\n            conditionalReset(filter_text, index) &&\n              initFilter({ filter_option, id, index, filter_text });\n          };\n        }\n      });\n    }\n\n    const initFilter = ({\n      filter_option,\n      id,\n      index,\n      filter_text,\n      wildcard = false,\n    }) => {\n      if (animation.queue && filterActive) {\n        return filterQueue.push(() =>\n          filterHelper({ filter_option, id, index, filter_text, wildcard })\n        );\n      }\n\n      return filterHelper({ filter_option, id, index, filter_text, wildcard });\n    };\n\n    const filterHelper = ({\n      filter_option,\n      id,\n      index,\n      filter_text,\n      wildcard = false,\n    }) => {\n      filterActive = true;\n      filter_text = escapeRegExp(filter_text.replace(/\\*/gi, \"\"));\n      if (\n        /^exclusive$/i.test(filter_type) ||\n        /^exclusive$/i.test(filter_option)\n      ) {\n        //checks if it has previously been clicked\n        if (id in filter[index] && !wildcard) {\n          delete filter[index][id];\n        } else {\n          filter[index] = {};\n          filter[index][id] = filter_text;\n        }\n      } else {\n        //it is definitely \"multi\"\n\n        //checks if it has previously been clicked\n        if (id in filter[index] && !wildcard) {\n          delete filter[index][id];\n        } else {\n          filter[index][id] = filter_text;\n        }\n      }\n      //try to fix queue here\n      if (animation.enable) {\n        const target = document.querySelector(this.cms_selector);\n        Animate.methods\n          .animate(findAndMatchFilterText, target, animation)\n          .then(() => {\n            filterActive = false;\n\n            const nextAnimation = filterQueue.shift();\n            if (nextAnimation) {\n              nextAnimation.call(null);\n            }\n          });\n      } else {\n        findAndMatchFilterText();\n      }\n    };\n\n    const findAndMatchFilterText = () => {\n      // filterActive = true;\n      const master_collection = get_cms_items();\n      master_collection.map((elem, i) => {\n        const search_result = filter.reduce((curr, search) => {\n          //creating a regex to test against\n          const val = `(${Object[\"values\"](search).join(\"|\")})`;\n\n          const result = [].slice.call(elem.children).map((item, j) => {\n            const re = new RegExp(val, \"gi\");\n            const valid = re.test(item.textContent);\n\n            const clonedItem = item.cloneNode(true);\n\n            if (valid) {\n              clonedItem.style.display = \"block\";\n            } else {\n              clonedItem.style.display = \"none\";\n            }\n\n            // return clonedItem.outerHTML;\n            return clonedItem;\n          });\n\n          if (curr.length < 1) {\n            return result;\n          }\n\n          // return [...curr.filter((a) => result.includes(a))]\n\n          //intersections of the results\n          return [\n            ...curr.map((a, index) => {\n              if (a.style.display !== result[index].style.display) {\n                a.style.display = \"none\";\n              }\n              return a;\n            }),\n          ];\n        }, []); //.join(\"\").trim()\n\n        if (search_result.length > 1) {\n          [].slice.call(master_collection[i].children).map((child, k) => {\n            child.style.display = search_result[k].style.display;\n          });\n        }\n      });\n    };\n  }\n\n  public sort({\n    sortTrigger,\n    sortReverse,\n    activeClass,\n    animation = this.animation,\n  }) {\n    animation = { ...this.animation, ...animation };\n    if (animation) {\n      animation.enable = !/^false$/.test(String(animation.enable));\n      const effects = animation.effects.replace(\"fade\", \"\");\n      animation.effects = effects;\n\n      if (animation.effects.indexOf(\"translate\") < 0) {\n        animation.effects += \" translate(0px,0px)  \";\n      }\n      this.animation = animation;\n    }\n    animation = this.animation;\n\n    const get_cms_items: any = () =>\n      [].slice.call(document.querySelectorAll(this.cms_selector));\n\n    const triggerElem = [].slice.call(document.querySelectorAll(sortTrigger));\n\n    triggerElem.map((elem) => {\n      const triggerTag = elem && elem.tagName;\n\n      if (triggerTag == \"SELECT\") {\n        (<any>elem).addEventListener(\n          \"change\",\n          debounce((event) => {\n            let sortTarget = event.target.selectedOptions[0].value;\n            sortTarget = sortTarget || event.getAttribute(\"sort-by\");\n\n            sortHelper({ sortTarget, sortReverse });\n          }, 200)\n        );\n      } else if (triggerTag == \"INPUT\") {\n        //handle checkbox and radio button\n\n        (<any>elem).addEventListener(\n          \"change\",\n          debounce((event) => {\n            const sortTarget = event.target.getAttribute(\"sort-by\") || \"\";\n            const active = String(activeClass).replace(\".\", \"\");\n\n            removeActiveClassFromTriggers(sortTarget, active);\n\n            event.target.classList.toggle(active);\n            sortHelper({ sortTarget, sortReverse });\n          }, 200)\n        );\n      } else {\n        (<any>elem).addEventListener(\"click\", (event) => {\n          const target = event.currentTarget;\n          const sortTarget = target.getAttribute(\"sort-by\") || \"\";\n          const active = String(activeClass).replace(\".\", \"\");\n\n          const previouslyClicked = target.classList.contains(active);\n\n          removeActiveClassFromTriggers(target, active);\n\n          elem.classList.toggle(active);\n\n          const isReversed = previouslyClicked ? !sortReverse : sortReverse;\n\n          sortHelper({ sortTarget, sortReverse: isReversed });\n        });\n      }\n    });\n\n    const removeActiveClassFromTriggers = (target, activeClass) => {\n      triggerElem.forEach((elem) => {\n        if (elem.outerHTML != target.outerHTML) {\n          elem.classList.remove(activeClass);\n        }\n      });\n    };\n\n    const collator = new Intl.Collator(\"en\", {\n      numeric: true,\n      sensitivity: \"base\",\n    });\n\n    const sortHelper = ({ sortTarget, sortReverse }) => {\n      const initSort = () => sortMasterCollection({ sortReverse, sortTarget });\n\n      if (animation.enable) {\n        const target = document.querySelector(this.cms_selector);\n        Animate.methods.animate(initSort, target, animation);\n      } else {\n        initSort();\n      }\n    };\n\n    const sortMasterCollection = ({ sortTarget, sortReverse }) => {\n      const master_collection = get_cms_items();\n\n      master_collection.map((elem) => {\n        return [].slice\n          .call(elem.children)\n          .sort((a, b) => {\n            const x = a.querySelector(sortTarget).textContent;\n            const y = b.querySelector(sortTarget).textContent;\n\n            return collator.compare(x, y);\n          })\n          .map((sortedElem) => {\n            if (sortReverse) {\n              elem.insertBefore(sortedElem, elem.firstChild);\n              return;\n            }\n            elem.appendChild(sortedElem);\n          });\n      });\n    };\n  }\n\n  private setNestConfig(config) {\n    if (!this.nestConfig) {\n      this.nestConfig = config;\n    }\n  }\n\n  public nest({ textList, nestSource, nestTarget }) {\n    this.setNestConfig({ textList, nestSource, nestTarget });\n\n    const master_collections = Array.from(\n      document.querySelectorAll(this.cms_selector)\n    );\n\n    const sourceLinks = [].slice.call(\n      document.querySelectorAll(nestSource + \" a\")\n    );\n\n    master_collections.forEach((collection, i) => {\n      const textArray = Array.from(collection.querySelectorAll(textList));\n\n      const target = collection.querySelectorAll(nestTarget);\n\n      textArray.forEach((textElem, j) => {\n        if (textElem && target[j]) {\n          let tags = textElem.textContent;\n\n          tags = tags.replace(/\\s*,\\s*/gi, \"|\");\n          const tagsArry = tags.split(\"|\");\n          tags = \"^(\" + tags + \")$\";\n\n          target[j].innerHTML = sourceLinks\n            .filter((link) => {\n              const regex = new RegExp(tags, \"gi\");\n              const test = regex.test(link.textContent.trim());\n              return test;\n            })\n            .sort((a, b) => {\n              return (\n                tagsArry.indexOf(a.textContent.trim()) -\n                tagsArry.indexOf(b.textContent.trim())\n              );\n            })\n            .map((elem) => elem.outerHTML)\n            .join(\"\");\n        }\n      });\n    });\n  }\n\n  public tabs({ tabComponent, tabName }) {\n    const cms = this.getMasterCollection();\n    const testimonials = cms.querySelectorAll(\".w-dyn-item>div\");\n\n    const tabMenu = document.querySelector(tabComponent + \" .w-tab-menu\");\n    const tabContent = document.querySelector(tabComponent + \" .w-tab-content\");\n\n    const tabPane = tabContent.children[0];\n    const tabLink = tabMenu.querySelector(\"a\");\n\n    const control = \"\"; //etAttribute(\"aria-controls\");\n    console.log(tabLink, tabLink.href);\n\n    // const prefix = getPrefix(control);\n\n    //   tabLink.classList.remove('w--current');\n    //   tabPane.classList.remove('w--tab-active');\n\n    // const tabLinkClassNames = tabLink.className;\n    // const tabContentClassNames = tabPane.className;\n\n    //clear tabMenu and tabContent\n\n    //   tabMenu.innerHTML=\"\";\n    //   tabContent.innerHTML=\"\";\n\n    //appends new contents\n\n    //   testimonials.forEach((element,index) => {\n\n    //       const name = element.querySelector(tabName);\n\n    //       const newLink=getTabLink({name,prefix,index,classes:tabLinkClassNames});\n    //       tabMenu.innerHTML += newLink;\n\n    //       const content= element.outerHTML;\n    //       const newPane=getTabPane({name,prefix,index,classes:tabContentClassNames,content});\n    //       tabContent.innerHTML +=newPane;\n\n    //   });\n  }\n}\n\ninterface AltClass {\n  classTarget: string;\n  classToAdd: string;\n}\n\ninterface LoadMore {\n  button: string;\n  loadAll?: boolean;\n  resetIx?: boolean;\n  animation?: Animatn;\n}\n\ninterface AddClass {\n  classArray: Array<AltClass>; //list of classnames you want to add\n  frequency: number; //The frequency or order of addition of class to the list\n  start: number; //position of list item to start with\n}\n\ninterface FilterGroup {\n  filter_group: string;\n  filter_option: string;\n}\n\ninterface Animatn {\n  enable?: boolean;\n  easing?: string;\n  duration?: number;\n  effects?: string;\n  queue?: boolean;\n}\n\ninterface Filter {\n  cms_filter: FilterGroup[] | string;\n  filter_type: string;\n}\n\ninterface LazyLoad {\n  type: number;\n  className: string;\n}\n\n// Function from David Walsh: http://davidwalsh.name/css-animation-callback\nfunction whichTransitionEvent() {\n  var t,\n    el = document.createElement(\"fakeelement\");\n\n  var transitions = {\n    transition: \"transitionend\",\n    OTransition: \"oTransitionEnd\",\n    MozTransition: \"transitionend\",\n    WebkitTransition: \"webkitTransitionEnd\",\n  };\n\n  for (t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\nfunction whichAnimationEvent() {\n  var t,\n    el = document.createElement(\"fakeelement\");\n\n  var animations = {\n    animation: \"animationend\",\n    OAnimationn: \"oAnimationnEnd\",\n    MozAnimationn: \"animationnend\",\n    WebkitAnimationn: \"webkitAnimationnEnd\",\n  };\n\n  for (t in animations) {\n    if (el.style[t] !== undefined) {\n      return animations[t];\n    }\n  }\n}\n\nfunction debounce(callback, wait) {\n  let timeout;\n  return (...args) => {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => callback.apply(context, args), wait);\n  };\n}\n\n(window as any).FsLibrary = FsLibrary;\n","import Animate from \"./animate\";\nimport { once } from \"../js/util/index\";\nimport { registerListener, isInViewport, isVisible, createDocument, escapeRegExp, } from \"./utility\";\nclass FsLibrary {\n    constructor(cms_selector, opt = { type: 1, className: \"image\" }) {\n        this.animation = {\n            enable: true,\n            duration: 250,\n            easing: \"ease-in-out\",\n            effects: \"translate(0px,0px)\",\n            queue: true,\n        };\n        this.index = 0;\n        this.animationStyle = `\n        \n\n    @keyframes fade-in {\n        0% {\n            opacity: 0;\n           transform:{{transform}};\n        }\n        100% {\n            transform:translate(0) rotate3d(0) rotate(0) scale(1);\n            opacity: 1;\n        }\n      }\n      \n      .fslib-fadeIn {\n        animation-name: fade-in;\n        animation-duration: {{duration}}s;\n        animation-iteration-count: 1;\n        animation-timing-function: {{easing}};\n        animation-fill-mode: forwards;\n      }\n`;\n        this.tinyImgBase64 = `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`;\n        //   this.lazyLoadOpt={type:1,...opt};\n        opt && this.lazyLoad(cms_selector, opt.className);\n        this.cms_selector = cms_selector;\n    }\n    reinitializeWebflow() {\n        window.Webflow.destroy();\n        window.Webflow.ready();\n        // (<any>window).Webflow.require(\"ix2\").init();\n    }\n    lazyLoad(cms_selector, className) {\n        let lazy = [];\n        registerListener(\"load\", setLazy);\n        registerListener(\"load\", lazyLoad);\n        registerListener(\"scroll\", lazyLoad);\n        registerListener(\"resize\", lazyLoad);\n        function setLazy() {\n            lazy = [].slice.call(document.querySelectorAll(`${cms_selector} .${className}`));\n        }\n        function lazyLoad() {\n            for (var i = 0; i < lazy.length; i++) {\n                if (isInViewport(lazy[i])) {\n                    // if (lazy[i].getAttribute('data-src')){\n                    //     lazy[i].src = lazy[i].getAttribute('data-src');\n                    //     lazy[i].removeAttribute('data-src');\n                    // }\n                    if (lazy[i].classList.contains(className)) {\n                        lazy[i].classList.remove(className);\n                    }\n                }\n            }\n            cleanLazy();\n        }\n        function cleanLazy() {\n            // lazy = [].filter.call(lazy, function(l){ return l.getAttribute('data-src');});\n            lazy = [].filter.call(lazy, (elem) => {\n                return elem.classList.contains(className);\n            });\n        }\n    }\n    makeStyleSheet({ duration = 1, easing = \"ease-in-out\", transform = \"translate(0)\", }) {\n        this.animationStyle = this.animationStyle.replace(\"{{duration}}\", \"\" + duration);\n        this.animationStyle = this.animationStyle.replace(\"{{ease}}\", easing);\n        this.animationStyle = this.animationStyle.replace(\"{{transform}}\", transform);\n        const head = document.head || document.getElementsByTagName(\"head\")[0];\n        const lazyLoadCss = `<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/progressive-image.js/dist/progressive-image.css\">`;\n        head.innerHTML += lazyLoadCss;\n        const style = document.createElement(\"style\");\n        head.appendChild(style);\n        style.type = \"text/css\";\n        if (style.styleSheet) {\n            // This is required for IE8 and below.\n            style.styleSheet.cssText = this.animationStyle;\n        }\n        else {\n            style.appendChild(document.createTextNode(this.animationStyle));\n        }\n        return style;\n    }\n    setNextButtonIndex() {\n        const cmsList = document.querySelectorAll(this.cms_selector);\n        for (let i = 0; i < cmsList.length; i++) {\n            const nextSibling = cmsList[i].nextElementSibling;\n            if (nextSibling &&\n                isVisible(nextSibling) &&\n                nextSibling.querySelector(\"w-pagination-next\")) {\n                this.index = i;\n            }\n        }\n        this.indexSet = true;\n    }\n    /**\n     * Combine all the collection items into one collection.\n     */\n    combine() {\n        this.setNextButtonIndex();\n        //get all collections\n        const visible_collection = [].slice\n            .call(document.querySelectorAll(this.cms_selector))\n            .filter(isVisible);\n        let nextButton = null;\n        //copies the cms items into the first collection list\n        visible_collection[0].innerHTML = visible_collection\n            .reduce((curr, item) => {\n            //gets all the items\n            const aNextButton = item.nextElementSibling;\n            if (aNextButton && isVisible(aNextButton) && !nextButton) {\n                nextButton = aNextButton.outerHTML;\n            }\n            return [...curr, item.innerHTML];\n        }, [])\n            .join(\"\");\n        if (nextButton) {\n            nextButton.outerHTML = nextButton.outerHTML + nextButton;\n        }\n        //deletes the rest collection list\n        visible_collection.forEach((elem, i) => {\n            if (i > 0) {\n                elem.parentElement.outerHTML = \"\";\n            }\n            this.reinitializeWebflow();\n        });\n    }\n    getMasterCollection() {\n        return document.querySelector(this.cms_selector);\n    }\n    getNextData(url) {\n        return new Promise((resolve) => {\n            let xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", url);\n            xhr.send();\n            xhr.onload = () => {\n                if (xhr.status == 200) {\n                    // done(xhr.response);\n                    return resolve(xhr.response);\n                }\n            };\n        }).then((res) => res);\n    }\n    appendPaginatedData(data) {\n        const newDoc = createDocument(data, \"newDoc\" + Date.now());\n        const collection = newDoc.querySelectorAll(this.cms_selector)[this.index];\n        const nextHref = collection.parentElement.querySelector(\".w-pagination-next\");\n        nextHref\n            ? this.setLoadmoreHref(nextHref.href)\n            : this.setLoadmoreHref(\"\");\n        collection && this.appendToCms(collection.children);\n        if (!this.hidden_collections.length && !nextHref) {\n            this.getLoadmoreHref().outerHTML = \"\";\n        }\n    }\n    appendToCms(collection) {\n        const master_collection = this.getMasterCollection();\n        [].slice.call(collection).forEach((element) => {\n            element.classList.add(\"fslib-fadeIn\");\n            once(element, whichAnimationEvent(), ({ type }) => {\n                element.classList.remove(\"fslib-fadeIn\");\n            });\n            master_collection.appendChild(element);\n            if (this.addClass) {\n                this.addclasses(this.addClassConfig);\n            }\n        });\n        if (this.nestConfig) {\n            this.nest(this.nestConfig);\n        }\n    }\n    setLoadmoreHref(url) {\n        const master_collection = this.getMasterCollection();\n        const hrefButton = master_collection.parentElement.querySelector(\"a.w-pagination-next\");\n        hrefButton.setAttribute(\"data-href\", url || hrefButton.href);\n        return hrefButton;\n    }\n    getLoadmoreHref(selector) {\n        const master_collection = this.getMasterCollection();\n        const hrefButton = master_collection.parentElement.querySelector(selector || \"a.w-pagination-next\");\n        return hrefButton;\n    }\n    getHiddenCollections() {\n        return [].slice\n            .call(document.querySelectorAll(this.cms_selector))\n            .filter((e) => !isVisible(e));\n    }\n    setHiddenCollections() {\n        const collection = this.getHiddenCollections();\n        this.hidden_collections = collection.map((val) => val.parentElement.cloneNode(true));\n        collection.forEach((val) => (val.parentNode.outerHTML = \"\"));\n    }\n    loadmore(config = {\n        button: \"a.w-pagination-next\",\n        loadAll: false,\n        resetIx: true,\n        animation: this.animation,\n    }) {\n        if (!this.indexSet) {\n            this.setNextButtonIndex();\n        }\n        this.setHiddenCollections();\n        if (config.animation) {\n            const effects = config.animation.effects.replace(\"fade\", \"\");\n            let { duration, easing } = config.animation;\n            duration = duration ? duration / 1000 : 1;\n            easing = easing || \"linear\";\n            this.makeStyleSheet({ duration, easing, transform: effects });\n        }\n        else {\n            this.makeStyleSheet({});\n        }\n        const { button, resetIx = true, loadAll = false } = config;\n        const nextButton = this.getLoadmoreHref(button);\n        nextButton.setAttribute(\"data-href\", nextButton.href);\n        nextButton.removeAttribute(\"href\");\n        let busy = false;\n        nextButton.onclick = (evt) => {\n            initFetch();\n        };\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            loadAll && initFetch(true);\n        });\n        const initFetch = (recursive = false) => {\n            if (busy)\n                return false;\n            const href = nextButton.getAttribute(\"data-href\");\n            busy = true;\n            if (href) {\n                return this.getNextData(href).then((res) => {\n                    //enable button\n                    this.appendPaginatedData(res);\n                    busy = false;\n                    if (resetIx) {\n                        this.reinitializeWebflow();\n                    }\n                    if (recursive) {\n                        initFetch(true);\n                    }\n                });\n            }\n            const nextcollection = this.hidden_collections.shift();\n            if (nextcollection) {\n                this.appendToCms(nextcollection.firstElementChild.children);\n                const aHref = nextcollection.querySelector(\".w-pagination-next\");\n                this.setLoadmoreHref(aHref.href);\n                this.index++;\n                busy = false;\n                if (recursive) {\n                    initFetch(true);\n                }\n            }\n            if (resetIx) {\n                this.reinitializeWebflow();\n            }\n        };\n    }\n    /**\n     *\n     * @param container The css selector of the parent container elem of the list you want to add classnames to.\n     * @param config  defined as\n     *  {\n     *     classArray: Array<AltClass>; //list of classnames you want to add\n     *     frequency: number; //The frequency or order of addition of class to the list\n     *     start: number; //position of list item to start with\n     * }\n     */\n    addclasses(config = { classArray: [], frequency: 2, start: 1 }) {\n        const parent = document.querySelector(this.cms_selector);\n        const { frequency, start, classArray: classNames } = config;\n        this.addClassConfig = config;\n        this.addClass = true;\n        if (frequency < 0) {\n            throw \"unaccepted value passed as frequency\";\n        }\n        else if (start < 1) {\n            throw \"unaccepted value passed as start\";\n        }\n        classNames.map(({ classTarget: target, classToAdd: alt }) => {\n            let list = parent.querySelectorAll(target);\n            let targerIsDirectChild = true;\n            if (parent.children[0] != list[0]) {\n                targerIsDirectChild = false;\n                list = parent.children;\n            }\n            const addon = alt.replace(/\\./g, \"\");\n            for (let j = start - 1; j < list.length; j += frequency) {\n                if (targerIsDirectChild) {\n                    list[j].classList.toggle(addon);\n                }\n                else {\n                    list[j].querySelectorAll(target).forEach((elem) => {\n                        elem.classList.toggle(addon);\n                    });\n                }\n                if (frequency == 0) {\n                    break;\n                }\n                this.reinitializeWebflow();\n            }\n        });\n    }\n    /**\n     *\n     * @param cms_selector\n     */\n    filter(config = {\n        filterArray: [],\n        animation: this.animation,\n        activeClass: \"active\",\n    }) {\n        let { filterArray: cms_filter, animation, activeClass } = config;\n        activeClass = activeClass || \"active\";\n        animation = Object.assign({}, this.animation, animation);\n        let filter_type = typeof cms_filter == \"string\" ? \"exclusive\" : \"multi\";\n        if (animation) {\n            animation.enable = !/^false$/.test(String(animation.enable));\n            const effects = animation.effects.replace(\"fade\", \"\");\n            animation.effects = effects;\n            if (animation.effects.indexOf(\"translate\") < 0) {\n                animation.effects += \" translate(0px,0px)  \";\n            }\n            this.animation = animation;\n        }\n        animation = this.animation;\n        let filterActive = false;\n        let filterQueue = [];\n        let filter = []; //2D array to hold categories of filter selectors and their corresponding\n        //get all collections\n        const get_cms_items = () => [].slice.call(document.querySelectorAll(this.cms_selector));\n        if (Array.isArray(cms_filter)) {\n            cms_filter.map((val, index) => {\n                let prevClicked;\n                const { filterType: filter_option } = val;\n                const filter_group = [].slice.call(document.querySelectorAll(`${val.filterWrapper} [filter-by]`));\n                assignChangeEventToButtons({\n                    index,\n                    prevClicked,\n                    filter_option,\n                    filter_group,\n                });\n            });\n        }\n        else if (typeof cms_filter == \"string\") {\n            let prevClicked;\n            const filter_group = [].slice.call(document.querySelectorAll(`${cms_filter} [filter-by]`));\n            assignChangeEventToButtons({ index: 0, prevClicked, filter_group });\n        }\n        else {\n            throw \"Incorrect type passed as cms_filter\";\n        }\n        function conditionalReset(filter_text, index) {\n            const isEmpty = !filter_text.trim();\n            const tag = Object.values(filter[index]);\n            if (isEmpty && tag.includes(filter_text)) {\n                return false;\n            }\n            if (isEmpty && !tag.length) {\n                return false;\n            }\n            return true;\n        }\n        function assignChangeEventToButtons({ index, prevClicked, filter_option = filter_type, filter_group, }) {\n            filter[index] = {}; //initialise default values\n            filter_group.map((elem, j) => {\n                const id = `${index}${j}`;\n                const tag_element = elem && elem.tagName;\n                if (tag_element == \"SELECT\") {\n                    elem.addEventListener(\"change\", debounce((event) => {\n                        const filter_text = event.target.selectedOptions[0].value || \"\";\n                        conditionalReset(filter_text, index) &&\n                            initFilter({\n                                filter_option,\n                                id,\n                                index,\n                                filter_text,\n                                wildcard: true,\n                            });\n                    }, 500));\n                }\n                else if (tag_element == \"INPUT\") {\n                    //handle checkbox and radio button\n                    switch (elem.type) {\n                        case \"text\":\n                            elem.addEventListener(\"input\", debounce((event) => {\n                                const filter_text = event.target.value;\n                                conditionalReset(filter_text, index) &&\n                                    initFilter({\n                                        filter_option,\n                                        id,\n                                        index,\n                                        filter_text,\n                                        wildcard: true,\n                                    });\n                            }, 500));\n                            break;\n                        default:\n                            elem.addEventListener(\"change\", (event) => {\n                                const filter_text = !event.target.checked\n                                    ? \"\"\n                                    : event.currentTarget.getAttribute(\"filter-by\") || \"\";\n                                conditionalReset(filter_text, index) &&\n                                    initFilter({ filter_option, id, index, filter_text });\n                            });\n                            break;\n                    }\n                }\n                else {\n                    elem.onclick = (event) => {\n                        const active = event.currentTarget.className;\n                        //only one element should have active class for or\n                        if (/^exclusive$/i.test(filter_type) ||\n                            /^exclusive$/i.test(filter_option)) {\n                            if (prevClicked)\n                                prevClicked.classList.remove(activeClass);\n                        }\n                        prevClicked = event.currentTarget;\n                        if (active.includes(activeClass)) {\n                            prevClicked.classList.remove(activeClass);\n                        }\n                        else {\n                            prevClicked.classList.add(activeClass);\n                        }\n                        const filter_text = prevClicked.getAttribute(\"filter-by\") || \"\";\n                        //prevent further filter if filter is empty and reset button is clicked.\n                        conditionalReset(filter_text, index) &&\n                            initFilter({ filter_option, id, index, filter_text });\n                    };\n                }\n            });\n        }\n        const initFilter = ({ filter_option, id, index, filter_text, wildcard = false, }) => {\n            if (animation.queue && filterActive) {\n                return filterQueue.push(() => filterHelper({ filter_option, id, index, filter_text, wildcard }));\n            }\n            return filterHelper({ filter_option, id, index, filter_text, wildcard });\n        };\n        const filterHelper = ({ filter_option, id, index, filter_text, wildcard = false, }) => {\n            filterActive = true;\n            filter_text = escapeRegExp(filter_text.replace(/\\*/gi, \"\"));\n            if (/^exclusive$/i.test(filter_type) ||\n                /^exclusive$/i.test(filter_option)) {\n                //checks if it has previously been clicked\n                if (id in filter[index] && !wildcard) {\n                    delete filter[index][id];\n                }\n                else {\n                    filter[index] = {};\n                    filter[index][id] = filter_text;\n                }\n            }\n            else {\n                //it is definitely \"multi\"\n                //checks if it has previously been clicked\n                if (id in filter[index] && !wildcard) {\n                    delete filter[index][id];\n                }\n                else {\n                    filter[index][id] = filter_text;\n                }\n            }\n            //try to fix queue here\n            if (animation.enable) {\n                const target = document.querySelector(this.cms_selector);\n                Animate.methods\n                    .animate(findAndMatchFilterText, target, animation)\n                    .then(() => {\n                    filterActive = false;\n                    const nextAnimation = filterQueue.shift();\n                    if (nextAnimation) {\n                        nextAnimation.call(null);\n                    }\n                });\n            }\n            else {\n                findAndMatchFilterText();\n            }\n        };\n        const findAndMatchFilterText = () => {\n            // filterActive = true;\n            const master_collection = get_cms_items();\n            master_collection.map((elem, i) => {\n                const search_result = filter.reduce((curr, search) => {\n                    //creating a regex to test against\n                    const val = `(${Object[\"values\"](search).join(\"|\")})`;\n                    const result = [].slice.call(elem.children).map((item, j) => {\n                        const re = new RegExp(val, \"gi\");\n                        const valid = re.test(item.textContent);\n                        const clonedItem = item.cloneNode(true);\n                        if (valid) {\n                            clonedItem.style.display = \"block\";\n                        }\n                        else {\n                            clonedItem.style.display = \"none\";\n                        }\n                        // return clonedItem.outerHTML;\n                        return clonedItem;\n                    });\n                    if (curr.length < 1) {\n                        return result;\n                    }\n                    // return [...curr.filter((a) => result.includes(a))]\n                    //intersections of the results\n                    return [\n                        ...curr.map((a, index) => {\n                            if (a.style.display !== result[index].style.display) {\n                                a.style.display = \"none\";\n                            }\n                            return a;\n                        }),\n                    ];\n                }, []); //.join(\"\").trim()\n                if (search_result.length > 1) {\n                    [].slice.call(master_collection[i].children).map((child, k) => {\n                        child.style.display = search_result[k].style.display;\n                    });\n                }\n            });\n        };\n    }\n    sort({ sortTrigger, sortReverse, activeClass, animation = this.animation, }) {\n        animation = Object.assign({}, this.animation, animation);\n        if (animation) {\n            animation.enable = !/^false$/.test(String(animation.enable));\n            const effects = animation.effects.replace(\"fade\", \"\");\n            animation.effects = effects;\n            if (animation.effects.indexOf(\"translate\") < 0) {\n                animation.effects += \" translate(0px,0px)  \";\n            }\n            this.animation = animation;\n        }\n        animation = this.animation;\n        const get_cms_items = () => [].slice.call(document.querySelectorAll(this.cms_selector));\n        const triggerElem = [].slice.call(document.querySelectorAll(sortTrigger));\n        triggerElem.map((elem) => {\n            const triggerTag = elem && elem.tagName;\n            if (triggerTag == \"SELECT\") {\n                elem.addEventListener(\"change\", debounce((event) => {\n                    let sortTarget = event.target.selectedOptions[0].value;\n                    sortTarget = sortTarget || event.getAttribute(\"sort-by\");\n                    sortHelper({ sortTarget, sortReverse });\n                }, 200));\n            }\n            else if (triggerTag == \"INPUT\") {\n                //handle checkbox and radio button\n                elem.addEventListener(\"change\", debounce((event) => {\n                    const sortTarget = event.target.getAttribute(\"sort-by\") || \"\";\n                    const active = String(activeClass).replace(\".\", \"\");\n                    removeActiveClassFromTriggers(sortTarget, active);\n                    event.target.classList.toggle(active);\n                    sortHelper({ sortTarget, sortReverse });\n                }, 200));\n            }\n            else {\n                elem.addEventListener(\"click\", (event) => {\n                    const target = event.currentTarget;\n                    const sortTarget = target.getAttribute(\"sort-by\") || \"\";\n                    const active = String(activeClass).replace(\".\", \"\");\n                    const previouslyClicked = target.classList.contains(active);\n                    removeActiveClassFromTriggers(target, active);\n                    elem.classList.toggle(active);\n                    const isReversed = previouslyClicked ? !sortReverse : sortReverse;\n                    sortHelper({ sortTarget, sortReverse: isReversed });\n                });\n            }\n        });\n        const removeActiveClassFromTriggers = (target, activeClass) => {\n            triggerElem.forEach((elem) => {\n                if (elem.outerHTML != target.outerHTML) {\n                    elem.classList.remove(activeClass);\n                }\n            });\n        };\n        const collator = new Intl.Collator(\"en\", {\n            numeric: true,\n            sensitivity: \"base\",\n        });\n        const sortHelper = ({ sortTarget, sortReverse }) => {\n            const initSort = () => sortMasterCollection({ sortReverse, sortTarget });\n            if (animation.enable) {\n                const target = document.querySelector(this.cms_selector);\n                Animate.methods.animate(initSort, target, animation);\n            }\n            else {\n                initSort();\n            }\n        };\n        const sortMasterCollection = ({ sortTarget, sortReverse }) => {\n            const master_collection = get_cms_items();\n            master_collection.map((elem) => {\n                return [].slice\n                    .call(elem.children)\n                    .sort((a, b) => {\n                    const x = a.querySelector(sortTarget).textContent;\n                    const y = b.querySelector(sortTarget).textContent;\n                    return collator.compare(x, y);\n                })\n                    .map((sortedElem) => {\n                    if (sortReverse) {\n                        elem.insertBefore(sortedElem, elem.firstChild);\n                        return;\n                    }\n                    elem.appendChild(sortedElem);\n                });\n            });\n        };\n    }\n    setNestConfig(config) {\n        if (!this.nestConfig) {\n            this.nestConfig = config;\n        }\n    }\n    nest({ textList, nestSource, nestTarget }) {\n        this.setNestConfig({ textList, nestSource, nestTarget });\n        const master_collections = Array.from(document.querySelectorAll(this.cms_selector));\n        const sourceLinks = [].slice.call(document.querySelectorAll(nestSource + \" a\"));\n        master_collections.forEach((collection, i) => {\n            const textArray = Array.from(collection.querySelectorAll(textList));\n            const target = collection.querySelectorAll(nestTarget);\n            textArray.forEach((textElem, j) => {\n                if (textElem && target[j]) {\n                    let tags = textElem.textContent;\n                    tags = tags.replace(/\\s*,\\s*/gi, \"|\");\n                    const tagsArry = tags.split(\"|\");\n                    tags = \"^(\" + tags + \")$\";\n                    target[j].innerHTML = sourceLinks\n                        .filter((link) => {\n                        const regex = new RegExp(tags, \"gi\");\n                        const test = regex.test(link.textContent.trim());\n                        return test;\n                    })\n                        .sort((a, b) => {\n                        return (tagsArry.indexOf(a.textContent.trim()) -\n                            tagsArry.indexOf(b.textContent.trim()));\n                    })\n                        .map((elem) => elem.outerHTML)\n                        .join(\"\");\n                }\n            });\n        });\n    }\n    tabs({ tabComponent, tabName }) {\n        const cms = this.getMasterCollection();\n        const testimonials = cms.querySelectorAll(\".w-dyn-item>div\");\n        const tabMenu = document.querySelector(tabComponent + \" .w-tab-menu\");\n        const tabContent = document.querySelector(tabComponent + \" .w-tab-content\");\n        const tabPane = tabContent.children[0];\n        const tabLink = tabMenu.querySelector(\"a\");\n        const control = \"\"; //etAttribute(\"aria-controls\");\n        console.log(tabLink, tabLink.href);\n        // const prefix = getPrefix(control);\n        //   tabLink.classList.remove('w--current');\n        //   tabPane.classList.remove('w--tab-active');\n        // const tabLinkClassNames = tabLink.className;\n        // const tabContentClassNames = tabPane.className;\n        //clear tabMenu and tabContent\n        //   tabMenu.innerHTML=\"\";\n        //   tabContent.innerHTML=\"\";\n        //appends new contents\n        //   testimonials.forEach((element,index) => {\n        //       const name = element.querySelector(tabName);\n        //       const newLink=getTabLink({name,prefix,index,classes:tabLinkClassNames});\n        //       tabMenu.innerHTML += newLink;\n        //       const content= element.outerHTML;\n        //       const newPane=getTabPane({name,prefix,index,classes:tabContentClassNames,content});\n        //       tabContent.innerHTML +=newPane;\n        //   });\n    }\n}\n// Function from David Walsh: http://davidwalsh.name/css-animation-callback\nfunction whichTransitionEvent() {\n    var t, el = document.createElement(\"fakeelement\");\n    var transitions = {\n        transition: \"transitionend\",\n        OTransition: \"oTransitionEnd\",\n        MozTransition: \"transitionend\",\n        WebkitTransition: \"webkitTransitionEnd\",\n    };\n    for (t in transitions) {\n        if (el.style[t] !== undefined) {\n            return transitions[t];\n        }\n    }\n}\nfunction whichAnimationEvent() {\n    var t, el = document.createElement(\"fakeelement\");\n    var animations = {\n        animation: \"animationend\",\n        OAnimationn: \"oAnimationnEnd\",\n        MozAnimationn: \"animationnend\",\n        WebkitAnimationn: \"webkitAnimationnEnd\",\n    };\n    for (t in animations) {\n        if (el.style[t] !== undefined) {\n            return animations[t];\n        }\n    }\n}\nfunction debounce(callback, wait) {\n    let timeout;\n    return (...args) => {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => callback.apply(context, args), wait);\n    };\n}\nwindow.FsLibrary = FsLibrary;\n"]}