{"version":3,"sources":["combine.ts","combine.js"],"names":["FsLibrary","prototype","combine","setNextButtonIndex","visible_collection","slice","call","document","querySelectorAll","cms_selector","filter","isVisible","nextButton","innerHTML","reduce","curr","item","aNextButton","nextElementSibling","outerHTML","join","done","map","elem","i","parentElement","Promise","resolve","all","then","r","window","Webflow","require","reinitializeWebflow"],"mappings":";;;;;;AAAA;;AACA;;AAEE;ACAF;AACA;ADEAA,qBAAUC,SAAV,CAAoBC,OAApB,GAA4B,YAAA;AAAA;;AACxB,OAAKC,kBAAL,GADwB,CAExB;;AACA,MAAMC,kBAAkB,GAAQ,GAAGC,KAAH,CAC7BC,IAD6B,CACxBC,QAAQ,CAACC,gBAAT,CAA0B,KAAKC,YAA/B,CADwB,EAE7BC,MAF6B,CAEtBC,kBAFsB,CAAhC;AAGA,MAAIC,UAAU,GAAG,IAAjB,CANwB,CAQxB;;AACAR,EAAAA,kBAAkB,CAAC,CAAD,CAAlB,CAAsBS,SAAtB,GAAkCT,kBAAkB,CACjDU,MAD+B,CACxB,UAACC,IAAD,EAAOC,IAAP,EAAe;AACrB;AACA,QAAMC,WAAW,GAAGD,IAAI,CAACE,kBAAzB;;AACA,QAAID,WAAW,IAAI,wBAAUA,WAAV,CAAf,IAAyC,CAACL,UAA9C,EAA0D;AACxDA,MAAAA,UAAU,GAAGK,WAAW,CAACE,SAAzB;AACD;;AACD,yDAAWJ,IAAX,IAAiBC,IAAI,CAACH,SAAtB;AACD,GAR+B,EAQ7B,EAR6B,EAS/BO,IAT+B,CAS1B,EAT0B,CAAlC;;AAWA,MAAIR,UAAJ,EAAgB;AACdA,IAAAA,UAAU,CAACO,SAAX,GAAuBP,UAAU,CAACO,SAAX,GAAuBP,UAA9C;AACD,GAtBuB,CAwBxB;;;AACD,MAAMS,IAAI,GAAEjB,kBAAkB,CAACkB,GAAnB,CAAuB,UAACC,IAAD,EAAgBC,CAAhB,EAA6B;AAC7D,QAAIA,CAAC,GAAG,CAAR,EAAW;AACTD,MAAAA,IAAI,CAACE,aAAL,CAAmBN,SAAnB,GAA+B,EAA/B;AACD;;AACD,WAAOO,OAAO,CAACC,OAAR,EAAP;AACD,GALU,CAAZ;AAOCD,EAAAA,OAAO,CAACE,GAAR,CAAYP,IAAZ,EAAkBQ,IAAlB,CAAuB,UAAAC,CAAC,EAAE;AACxB,QAASC,MAAO,CAACC,OAAR,CAAgBC,OAAhB,CAAwB,KAAxB,CAAT,EAAwC;AACtC,MAAA,KAAI,CAACC,mBAAL;AACD;AACF,GAJD;AAMH,CAtCD","file":"combine.js","sourcesContent":["import { isVisible } from \"./utility\";\nimport { FsLibrary } from \"./fsLibrary\";\n\n  /**\n   * Combine all the collection items into one collection.\n   */\nFsLibrary.prototype.combine=function() {\n    this.setNextButtonIndex();\n    //get all collections\n    const visible_collection: any = [].slice\n      .call(document.querySelectorAll(this.cms_selector))\n      .filter(isVisible);\n    let nextButton = null;\n\n    //copies the cms items into the first collection list\n    visible_collection[0].innerHTML = visible_collection\n      .reduce((curr, item) => {\n        //gets all the items\n        const aNextButton = item.nextElementSibling;\n        if (aNextButton && isVisible(aNextButton) && !nextButton) {\n          nextButton = aNextButton.outerHTML;\n        }\n        return [...curr, item.innerHTML];\n      }, [])\n      .join(\"\");\n\n    if (nextButton) {\n      nextButton.outerHTML = nextButton.outerHTML + nextButton;\n    }\n\n    //deletes the rest collection list\n   const done= visible_collection.map((elem: Element, i: number) => {\n      if (i > 0) {\n        elem.parentElement.outerHTML = \"\";\n      }\n      return Promise.resolve()\n    })\n\n    Promise.all(done).then(r=>{\n      if((<any>window).Webflow.require(\"ix2\")){\n        this.reinitializeWebflow();\n      }\n    })\n\n}","import { isVisible } from \"./utility\";\nimport { FsLibrary } from \"./fsLibrary\";\n/**\n * Combine all the collection items into one collection.\n */\nFsLibrary.prototype.combine = function () {\n    this.setNextButtonIndex();\n    //get all collections\n    const visible_collection = [].slice\n        .call(document.querySelectorAll(this.cms_selector))\n        .filter(isVisible);\n    let nextButton = null;\n    //copies the cms items into the first collection list\n    visible_collection[0].innerHTML = visible_collection\n        .reduce((curr, item) => {\n        //gets all the items\n        const aNextButton = item.nextElementSibling;\n        if (aNextButton && isVisible(aNextButton) && !nextButton) {\n            nextButton = aNextButton.outerHTML;\n        }\n        return [...curr, item.innerHTML];\n    }, [])\n        .join(\"\");\n    if (nextButton) {\n        nextButton.outerHTML = nextButton.outerHTML + nextButton;\n    }\n    //deletes the rest collection list\n    const done = visible_collection.map((elem, i) => {\n        if (i > 0) {\n            elem.parentElement.outerHTML = \"\";\n        }\n        return Promise.resolve();\n    });\n    Promise.all(done).then(r => {\n        if (window.Webflow.require(\"ix2\")) {\n            this.reinitializeWebflow();\n        }\n    });\n};\n"]}