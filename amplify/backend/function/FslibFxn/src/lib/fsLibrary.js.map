{"version":3,"sources":["fsLibrary.ts"],"names":["FsLibrary","cms_selector","opt","type","className","indexSet","animation","enable","duration","easing","effects","queue","isPaginated","filterOn","filterObject","lastFilter","hasLoadmore","loadmoreOn","itemsPerPage","addClass","nestConfig","index","hidden_collections","addClassConfig","animationStyle","tinyImgBase64","blurImg","prototype","setNextButtonIndex","cmsList","document","querySelectorAll","i","length","nextSibling","nextElementSibling","querySelector","getMasterCollection","reinitializeWebflow","window","Webflow","require","destroy","ready","init","redraw","up","makeStyleSheet","transform","replace","head","getElementsByTagName","lazyLoadCss","innerHTML","style","createElement","appendChild","styleSheet","cssText","createTextNode"],"mappings":"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","file":"fsLibrary.js","sourcesContent":["import { blurImg } from \"./blurImg\";\nimport { isVisible } from \"./utility\";\nimport { trigger } from \"../js/util/index\";\n\n(<any>FsLibrary).cms_selector = \"\";\nexport function FsLibrary(\n  cms_selector: string,\n  opt: LazyLoad = { type: 1, className: \"image\" }\n) {\n  // opt && this.lazyLoad(cms_selector, opt.className);\n\n  this.cms_selector = cms_selector;\n\n  (<any>FsLibrary).cms_selector = cms_selector;\n\n  this.indexSet;\n\n  this.animation = {\n    enable: true,\n    duration: 250,\n    easing: \"ease-in-out\",\n    effects: \"translate(0px,0px)\",\n    queue: true,\n  };\n\n  this.isPaginated = false;\n  this.filterOn = false;\n  this.filterObject = null;\n\n  this.lastFilter;\n\n  this.hasLoadmore = false;\n  this.loadmoreOn = false;\n\n  this.itemsPerPage = 10;\n\n  this.addClass;\n\n  this.nestConfig;\n\n  this.index = 0;\n\n  this.hidden_collections;\n\n  this.addClassConfig;\n\n  this.animationStyle = `\n        \n\n          @keyframes fade-in {\n              0% {\n                  opacity: 0;\n                 transform:{{transform}};\n              }\n              100% {\n                  transform:translate(0) rotate3d(0) rotate(0) scale(1);\n                  opacity: 1;\n              }\n            }\n            \n            .fslib-fadeIn {\n              animation-name: fade-in;\n              animation-duration: {{duration}}s;\n              animation-iteration-count: 1;\n              animation-timing-function: {{easing}};\n              animation-fill-mode: forwards;\n            }\n        `;\n\n  this.tinyImgBase64 = blurImg;\n}\n\nFsLibrary.prototype.setNextButtonIndex = function () {\n  const cmsList = document.querySelectorAll(this.cms_selector);\n\n  for (let i = 0; i < cmsList.length; i++) {\n    const nextSibling = cmsList[i].nextElementSibling;\n    if (\n      nextSibling &&\n      isVisible(nextSibling) &&\n      nextSibling.querySelector(\"w-pagination-next\")\n    ) {\n      this.index = i;\n    }\n  }\n  this.indexSet = true;\n};\n\nFsLibrary.prototype.getMasterCollection = function () {\n  return document.querySelector(this.cms_selector);\n};\n\nFsLibrary.prototype.reinitializeWebflow = function () {\n  (<any>window).Webflow.require(\"ix2\").destroy();\n  (<any>window).Webflow.ready();\n  (<any>window).Webflow.require(\"ix2\").init();\n  (<any>window).Webflow.redraw.up();\n  trigger(document, \"readystatechange\");\n  trigger(document, \"IX2_PREVIEW_LOAD\");\n};\n\nFsLibrary.prototype.makeStyleSheet = function ({\n  duration = 1,\n  easing = \"ease-in-out\",\n  transform = \"translate(0)\",\n}) {\n  this.animationStyle = this.animationStyle.replace(\n    \"{{duration}}\",\n    \"\" + duration\n  );\n  this.animationStyle = this.animationStyle.replace(\"{{ease}}\", easing);\n  this.animationStyle = this.animationStyle.replace(\"{{transform}}\", transform);\n\n  const head = document.head || document.getElementsByTagName(\"head\")[0];\n  const lazyLoadCss = `<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/progressive-image.js/dist/progressive-image.css\">`;\n  head.innerHTML += lazyLoadCss;\n  const style: any = document.createElement(\"style\");\n  head.appendChild(style);\n\n  style.type = \"text/css\";\n  if (style.styleSheet) {\n    // This is required for IE8 and below.\n    style.styleSheet.cssText = this.animationStyle;\n  } else {\n    style.appendChild(document.createTextNode(this.animationStyle));\n  }\n\n  return style;\n};\n\ninterface LazyLoad {\n  type: number;\n  className: string;\n}\n\ninterface Animatn {\n  enable?: boolean;\n  easing?: string;\n  duration?: number;\n  effects?: string;\n  queue?: boolean;\n}\n\n(window as any).FsLibrary = FsLibrary;\n"]}