{"version":3,"sources":["filter/filter.ts"],"names":["FsLibrary","prototype","filter","filterArray","filterReset","animation","activeClass","initalFilter","cms_filter","replace","Object","assign","filter_type","enable","test","String","effects","indexOf","filterActive","filterQueue","triggerSelectors","get_cms_items","slice","call","document","querySelectorAll","cms_selector","Array","isArray","map","val","index","prevClicked","filterWrapper","selector","push","filter_group","assignChangeEventToButtons","resetButton","querySelector","addEventListener","initFilter","reset","filterType","filterByClass","filterRange","target","query","elem","j","tag_element","tagName","oldValue","event","filterText","selectedOptions","value","hold","wildcard","minInput","maxInput","passValue","addInputListener","type","currentTarget","getAttribute","proceed","onclick","active","className","classList","remove","includes","add","setFilterOn","activeFilters","values","find","length","filterOn","update","nonWildcard","hasLoadmore","loadmoreOn","filterObject","filterHelper","lastFilter","queue","Animate","methods","animate","findAndMatchFilterText","then","nextAnimation","shift","master_collection","instance","disposableNote","queries","visible_total","reduce","total","i","search_result","curr","join","result","children","item","removeAttribute","re","RegExp","textContent","valid","isInRange","clonedItem","cloneNode","style","display","a","visibleCount","activePageElementIndex","child","k","setAttribute","paged","isPaginated","itemsPerPage","pages","Math","ceil","paginate","empty","searchRanges","targetText","ans","range","boundaries","split","parseFloat","num","otherElem","fxn","name","otherValue","filter_text"],"mappings":"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","file":"filter.js","sourcesContent":["import { FsLibrary } from \"../fsLibrary\";\nimport { debounce, escapeRegExp } from \"../utility\";\nimport Animate from \"../animate\";\nimport {\n  shouldFilter,\n  preventParentFormSubmission,\n  resetAllFilter,\n  removeMsg,\n  preventFormSubmission,\n  shouldBeVisibleOnActivePage,\n} from \"./helper\";\n\nFsLibrary.prototype.filter = function ({\n  filterArray = [],\n  filterReset = \"\",\n  animation = this.animation,\n  activeClass = \"active\",\n  initalFilter = 1,\n}) {\n  let cms_filter = filterArray;\n  activeClass = activeClass || \"active\";\n  activeClass = activeClass.replace(\".\", \"\");\n\n  animation = { ...this.animation, ...animation };\n\n  let filter_type = typeof cms_filter == \"string\" ? \"exclusive\" : \"multi\";\n\n  if (animation) {\n    animation.enable = !/^false$/.test(String(animation.enable));\n    const effects = animation.effects.replace(\"fade\", \"\");\n    animation.effects = effects;\n\n    if (animation.effects.indexOf(\"translate\") < 0) {\n      animation.effects += \" translate(0px,0px)  \";\n    }\n    this.animation = animation;\n  }\n  animation = this.animation;\n\n  let filterActive = false;\n  let filterQueue = [];\n  let filter = {}; //to hold categories of filter selectors and their corresponding\n  let triggerSelectors = [];\n\n  //get all collections\n\n  const get_cms_items: any = () =>\n    [].slice.call(document.querySelectorAll(this.cms_selector));\n\n  if (Array.isArray(cms_filter)) {\n    cms_filter.map((val, index) => {\n      let prevClicked;\n      const { filterWrapper } = val;\n\n      const selector = `${filterWrapper} [filter-by]`;\n      triggerSelectors.push(selector);\n      const filter_group = [].slice.call(document.querySelectorAll(selector));\n      assignChangeEventToButtons({\n        index,\n        prevClicked,\n        filter_group,\n        ...val,\n      });\n    });\n  } else if (typeof cms_filter == \"string\") {\n    let prevClicked;\n    const selector = `${cms_filter} [filter-by]`;\n    triggerSelectors.push(selector);\n\n    const filter_group = [].slice.call(document.querySelectorAll(selector));\n    assignChangeEventToButtons({ index: 0, prevClicked, filter_group });\n  } else {\n    throw \"Incorrect type passed as cms_filter\";\n  }\n\n  if (filterReset) {\n    const resetButton = document.querySelector(filterReset);\n    resetButton.addEventListener(\"click\", () => {\n      initFilter({ reset: true });\n    });\n  }\n\n  function assignChangeEventToButtons({\n    index,\n    prevClicked,\n    filter_group,\n    filterType = filter_type,\n    filterByClass = null,\n    filterRange = false,\n  }) {\n    filter[index] = {\n      target: filterByClass,\n      query: [],\n      filterRange,\n    };\n\n    filter_group.map((elem, j) => {\n      const tag_element = elem && elem.tagName;\n      let oldValue = \"\";\n\n      if (tag_element == \"SELECT\") {\n        (<any>elem).addEventListener(\n          \"change\",\n          debounce((event) => {\n            const filterText = event.target.selectedOptions[0].value || \"\";\n\n            const hold = oldValue;\n            oldValue = filterText;\n\n            shouldFilter(filter, filterText, index) &&\n              initFilter({\n                filterType,\n                index,\n                filterText,\n                oldValue: hold,\n                wildcard: true,\n              });\n          }, 500)\n        );\n      } else if (tag_element == \"FORM\") {\n        preventFormSubmission(elem);\n        const minInput = elem.querySelector('input[name=\"min\"]');\n        const maxInput = elem.querySelector('input[name=\"max\"]');\n\n        const hold = oldValue;\n\n        const passValue = (filterText) => {\n          oldValue = filterText;\n\n          return initFilter({\n            index,\n            filterType,\n            wildcard: true,\n            oldValue: hold,\n            filterText,\n          });\n        };\n\n        addInputListener(minInput, maxInput, passValue);\n        addInputListener(maxInput, minInput, passValue);\n      } else if (tag_element == \"INPUT\") {\n        //handle checkbox and radio button\n\n        switch (elem.type) {\n          case \"text\":\n            preventParentFormSubmission(elem);\n\n            (<any>elem).addEventListener(\n              \"input\",\n              debounce((event) => {\n                const filterText = event.target.value;\n                const hold = oldValue;\n                oldValue = filterText;\n\n                shouldFilter(filter, filterText, index) &&\n                  initFilter({\n                    filterType,\n                    index,\n                    filterText,\n                    oldValue: hold,\n                    wildcard: true,\n                  });\n              }, 500)\n            );\n            break;\n          default:\n            (<any>elem).addEventListener(\"change\", (event) => {\n              const filterText =\n                event.currentTarget.getAttribute(\"filter-by\") || \"\";\n              const proceed = shouldFilter(filter, filterText, index);\n              proceed && initFilter({ filterType, index, filterText });\n            });\n            break;\n        }\n      } else {\n        (<any>elem).onclick = (event) => {\n          const active = event.currentTarget.className;\n\n          //only one element should have active class for or\n          if (\n            /^exclusive$/i.test(filter_type) ||\n            /^exclusive$/i.test(filterType)\n          ) {\n            if (prevClicked) prevClicked.classList.remove(activeClass);\n          }\n\n          prevClicked = event.currentTarget;\n\n          if (active.includes(activeClass)) {\n            prevClicked.classList.remove(activeClass);\n          } else {\n            prevClicked.classList.add(activeClass);\n          }\n\n          const filterText = prevClicked.getAttribute(\"filter-by\") || \"\";\n\n          //prevent further filter if filter is empty and reset button is clicked.\n\n          shouldFilter(filter, filterText, index) &&\n            initFilter({ filterType, index, filterText });\n        };\n      }\n    });\n  }\n\n  const setFilterOn = () => {\n    const activeFilters = Object.values(filter).find(\n      ({ query }) => (<any>query).length\n    );\n    if (activeFilters) {\n      this.filterOn = true;\n    }\n    return activeFilters;\n  };\n\n  const initFilter = ({\n    filterType = \"exclusive\",\n    index = 0,\n    filterText = \"\",\n    oldValue = \"\",\n    wildcard = false,\n    reset = false,\n  }) => {\n    filterText = escapeRegExp(filterText.replace(/\\*/gi, \"\"));\n\n    const prevClicked = filter[index].query.includes(filterText);\n    const update = filter[index].query.filter((val) => val != filterText);\n    const nonWildcard = filter[index].query.filter((val) => val != oldValue);\n\n    if (reset) {\n      filter = resetAllFilter({ filter, activeClass, triggerSelectors });\n    }\n    //checks if it has previously been clicked\n    else if (prevClicked && !wildcard) {\n      filter[index].query = update;\n    } else {\n      filter[index].query = nonWildcard;\n      if (/^exclusive$/i.test(filter_type) || /^exclusive$/i.test(filterType)) {\n        filter[index].query = [filterText];\n      } else {\n        //it is definitely \"multi\"\n        filterText && filterText.length && filter[index].query.push(filterText);\n      }\n    }\n\n    //set filter on incase element is paginated\n    setFilterOn();\n\n    if (this.hasLoadmore && this.loadmoreOn) {\n      this.filterObject = filter;\n      filterHelper();\n      (<any>this).lastFilter = filterHelper;\n      return;\n    }\n\n    if (animation.enable && animation.queue && filterActive) {\n      return filterQueue.push(() => filterHelper());\n    }\n\n    return filterHelper();\n  };\n\n  const filterHelper = () => {\n    filterActive = true;\n\n    //try to fix queue here\n    if (animation.enable) {\n      const target = document.querySelector(this.cms_selector);\n      return Animate.methods\n        .animate(\n          () => findAndMatchFilterText(filter, get_cms_items(), this),\n          target,\n          animation\n        )\n        .then(() => {\n          filterActive = false;\n\n          const nextAnimation = filterQueue.shift();\n          if (nextAnimation) {\n            nextAnimation.call(null);\n          }\n        });\n    }\n\n    findAndMatchFilterText(filter, get_cms_items(), this);\n    return filter;\n  };\n};\n\nconst findAndMatchFilterText = (filter, master_collection, instance) => {\n  const disposableNote = removeMsg();\n  let queries = Object[\"values\"](filter);\n\n  const visible_total = master_collection.reduce((total, elem, i) => {\n    const search_result: any = queries.reduce(\n      (curr: any, { query, target, filterRange }) => {\n        //creating a regex to test against\n        const val = filterRange ? query : `(${query.join(\"|\")})`;\n\n        const result = [].slice.call(elem.children).map((item, j) => {\n          item.removeAttribute(\"wf-fslib-paginated-hide\");\n          const re = new RegExp(val, \"gi\");\n\n          //checks if target is specified, otherwise use the textcontent from item\n          const textContent = (item.querySelector(target) || item).textContent;\n\n          const valid = filterRange\n            ? isInRange(val, textContent)\n            : re.test(textContent);\n\n          const clonedItem = item.cloneNode(true);\n\n          if (valid) {\n            clonedItem.style.display = \"\";\n          } else {\n            clonedItem.style.display = \"none\";\n          }\n\n          // return clonedItem.outerHTML;\n          return clonedItem;\n        });\n\n        if (curr.length < 1) {\n          return result;\n        }\n\n        //intersections of the results\n        return [\n          ...curr.map((a, index) => {\n            if (a.style.display !== result[index].style.display) {\n              a.style.display = \"none\";\n            }\n\n            return a;\n          }),\n        ];\n      },\n      []\n    );\n\n    let visibleCount = 0;\n\n    if (search_result.length > 1) {\n      let activePageElementIndex = 0;\n\n      [].slice.call(elem.children).map((child, k) => {\n        const display = search_result[k].style.display;\n\n        child.style.display = display;\n\n        if (display != \"none\") {\n          visibleCount++;\n          child.setAttribute(\"wf-fslib-paginated-hide\", 2);\n\n          let paged = false;\n          //show only items on current page\n          if (instance.isPaginated) {\n            paged = shouldBeVisibleOnActivePage({\n              index: activePageElementIndex,\n              active: 1,\n              itemsPerPage: instance.itemsPerPage,\n            });\n            activePageElementIndex++;\n          }\n\n          if (!paged) {\n            child.setAttribute(\"wf-fslib-paginated-hide\", 1);\n          }\n        }\n      });\n    }\n\n    return total + visibleCount;\n  }, 0);\n\n  if (instance.isPaginated) {\n    const pages = Math.ceil(visible_total / instance.itemsPerPage);\n\n    (<any>FsLibrary).paginate(pages == 1 ? 0 : pages, 1);\n  }\n\n  if (!visible_total) {\n    // master_collection[0].appendChild(disposableNote);\n    const empty = document.querySelector(\".empty-message\");\n    if (empty) {\n      (<any>empty).style.display = \"block\";\n    }\n  }\n};\n\nconst isInRange = (searchRanges, targetText) => {\n  const ans = searchRanges.filter((range) => {\n    const boundaries = range.split(\"-\").map(parseFloat);\n\n    let num =\n      targetText.replace(/[^0-9.]/g, \"\").replace(/(\\..*)\\./g, \"$1\") || 0;\n    num = parseFloat(num);\n\n    return (num - boundaries[0]) * (num - boundaries[1]) <= 0;\n  });\n\n  return searchRanges.length ? ans.length : true;\n};\n\nconst addInputListener = (elem, otherElem, fxn) => {\n  (<any>elem).addEventListener(\n    \"input\",\n    debounce((event) => {\n      event.target.value = event.target.value\n        .replace(/[^0-9.]/g, \"\")\n        .replace(/(\\..*)\\./g, \"$1\");\n\n      const name = event.target.name;\n\n      const val = event.target.value;\n\n      const otherValue = otherElem.value || 0;\n\n      const filter_text =\n        name == \"min\" ? `${val}-${otherValue}` : `${otherValue}-${val}`;\n\n      fxn(filter_text);\n    }, 500)\n  );\n};\n"]}