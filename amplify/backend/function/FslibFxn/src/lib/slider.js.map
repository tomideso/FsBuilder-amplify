{"version":3,"sources":["slider.ts"],"names":["FsLibrary","prototype","slider","sliderComponent","itemsPerSlide","resetIx","cms","getMasterCollection","testimonials","slice","call","querySelectorAll","slideLen","length","slideContainer","document","querySelector","slideHolder","slideNav","leftArrow","rightArrow","Webflow","window","push","___toggledInit___","templateSlide","children","cloneNode","innerHTML","newSlide","outerHTML","done","map","elem","idx","arr","count","Promise","resolve","all","then","r","ready","reinitializeWebflow"],"mappings":";;AAAA;;AAEAA,qBAAUC,SAAV,CAAoBC,MAApB,GAA6B,gBAI5B;AAAA;;AAAA,MAHCC,eAGD,QAHCA,eAGD;AAAA,gCAFCC,aAED;AAAA,MAFCA,aAED,mCAFiB,CAEjB;AAAA,0BADCC,OACD;AAAA,MADCA,OACD,6BADW,IACX;AACC,MAAMC,GAAG,GAAG,KAAKC,mBAAL,EAAZ;AACA,MAAMC,YAAY,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcJ,GAAG,CAACK,gBAAJ,CAAqB,eAArB,CAAd,CAArB;AAEA,MAAMC,QAAQ,GAAGJ,YAAY,CAACK,MAA9B;AAEA,MAAMC,cAAc,GAAGC,QAAQ,CAACC,aAAT,CAAuBb,eAAvB,CAAvB;AAEA,MAAMc,WAAW,GAAGH,cAAc,CAACE,aAAf,CAA6B,gBAA7B,CAApB;AACA,MAAME,QAAQ,GAAGJ,cAAc,CAACE,aAAf,CAA6B,eAA7B,CAAjB;AACA,MAAMG,SAAS,GAAGL,cAAc,CAACE,aAAf,CAA6B,sBAA7B,CAAlB;AACA,MAAMI,UAAU,GAAGN,cAAc,CAACE,aAAf,CAA6B,uBAA7B,CAAnB;AAEA,MAAMK,OAAO,GAASC,MAAO,CAACD,OAAR,IAAmB,EAAzC;AACAA,EAAAA,OAAO,CAACE,IAAR,CAAa,YAAK;AAChB,QAAUD,MAAO,CAACE,iBAAlB,EAAqC;AACnC;AACD;;AACD,QAAMC,aAAa,GAAGR,WAAW,CAACS,QAAZ,CAAqB,CAArB,EAAwBC,SAAxB,CAAkC,IAAlC,CAAtB,CAJgB,CAKhB;AAEA;AAEA;;AAEAV,IAAAA,WAAW,CAACW,SAAZ,GAAwB,EAAxB,CAXgB,CAYhB;;AAEA,QAAIC,QAAQ,GAAQJ,aAAa,CAACE,SAAd,CAAwB,IAAxB,CAApB;AACAE,IAAAA,QAAQ,CAACD,SAAT,GAAqB,EAArB;;AAEA,QAAIhB,QAAQ,IAAI,CAAhB,EAAmB;AACjBM,MAAAA,QAAQ,CAACY,SAAT,GAAqB,EAArB;AACAX,MAAAA,SAAS,CAACW,SAAV,GAAsB,EAAtB;AACAV,MAAAA,UAAU,CAACU,SAAX,GAAuB,EAAvB;AACD;;AAED,QAAMC,IAAI,GAAGvB,YAAY,CAACwB,GAAb,CAAiB,UAACC,IAAD,EAAOC,GAAP,EAAYC,GAAZ,EAAmB;AAC/CN,MAAAA,QAAQ,CAACD,SAAT,IAAsBK,IAAI,CAACH,SAA3B;AAEA,UAAMM,KAAK,GAAGF,GAAG,GAAG,CAApB;;AAEA,UAAI,CAACA,GAAG,GAAG,CAAP,IAAY9B,aAAZ,IAA6B,CAA7B,IAAkCgC,KAAK,IAAIxB,QAA/C,EAAyD;AACvDK,QAAAA,WAAW,CAACW,SAAZ,IAA+BC,QAAS,CAACC,SAAzC,CADuD,CAEvD;;AAEAD,QAAAA,QAAQ,CAACD,SAAT,GAAqB,EAArB;AACD;;AACD,aAAOS,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACD,KAZY,CAAb;AAcAD,IAAAA,OAAO,CAACE,GAAR,CAAYR,IAAZ,EAAkBS,IAAlB,CAAuB,UAACC,CAAD,EAAM;AAC3B3B,MAAAA,cAAc,CAACgB,SAAf,IAA4B,EAA5B;AACMR,MAAAA,MAAO,CAACE,iBAAR,GAA4B,IAA5B;AACAF,MAAAA,MAAO,CAACD,OAAR,CAAgBqB,KAAhB;AACN,OAAC,CAACrC,OAAF,IAAa,KAAI,CAACsC,mBAAL,EAAb;AACD,KALD;AAMD,GA3CD;AA4CD,CA9DD","file":"slider.js","sourcesContent":["import { FsLibrary } from \"./fsLibrary\";\n\nFsLibrary.prototype.slider = function ({\n  sliderComponent,\n  itemsPerSlide = 1,\n  resetIx = true,\n}) {\n  const cms = this.getMasterCollection();\n  const testimonials = [].slice.call(cms.querySelectorAll(\".w-dyn-item>*\"));\n\n  const slideLen = testimonials.length;\n\n  const slideContainer = document.querySelector(sliderComponent);\n\n  const slideHolder = slideContainer.querySelector(\".w-slider-mask\");\n  const slideNav = slideContainer.querySelector(\".w-slider-nav\");\n  const leftArrow = slideContainer.querySelector(\".w-slider-arrow-left\");\n  const rightArrow = slideContainer.querySelector(\".w-slider-arrow-right\");\n\n  const Webflow = (<any>window).Webflow || [];\n  Webflow.push(() => {\n    if ((<any>window).___toggledInit___) {\n      return;\n    }\n    const templateSlide = slideHolder.children[0].cloneNode(true);\n    // const templateSlideNav = slideNav.children[0];\n\n    // templateSlideNav.classList.remove(\"w-active\");\n\n    // const templateDot = templateSlideNav.outerHTML;\n\n    slideHolder.innerHTML = \"\";\n    // slideNav.innerHTML = \"\";\n\n    let newSlide: any = templateSlide.cloneNode(true);\n    newSlide.innerHTML = \"\";\n\n    if (slideLen <= 1) {\n      slideNav.outerHTML = \"\";\n      leftArrow.outerHTML = \"\";\n      rightArrow.outerHTML = \"\";\n    }\n\n    const done = testimonials.map((elem, idx, arr) => {\n      newSlide.innerHTML += elem.outerHTML;\n\n      const count = idx + 1;\n\n      if ((idx + 1) % itemsPerSlide == 0 || count == slideLen) {\n        slideHolder.innerHTML += (<any>newSlide).outerHTML;\n        // slideNav.innerHTML += templateDot;\n\n        newSlide.innerHTML = \"\";\n      }\n      return Promise.resolve(true);\n    });\n\n    Promise.all(done).then((r) => {\n      slideContainer.outerHTML += \"\";\n      (<any>window).___toggledInit___ = true;\n      (<any>window).Webflow.ready();\n      !!resetIx && this.reinitializeWebflow();\n    });\n  });\n};\n"]}