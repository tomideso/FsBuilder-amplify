{"version":3,"sources":["utility.ts"],"names":["isInViewport","el","rect","getBoundingClientRect","bottom","right","top","window","innerHeight","document","documentElement","clientHeight","left","innerWidth","clientWidth","isOutOfViewport","elem","bounding","out","any","all","registerListener","event","func","addEventListener","attachEvent","removeListener","removeEventListener","isVisible","width","height","findDeepestChildElement","slice","call","querySelectorAll","find","e","children","length","createDocument","html","title","doc","implementation","createHTMLDocument","innerHTML","escapeRegExp","string","replace","whichTransitionEvent","t","createElement","transitions","transition","OTransition","MozTransition","WebkitTransition","style","undefined","whichAnimationEvent","animations","animation","OAnimationn","MozAnimationn","WebkitAnimationn","debounce","callback","wait","timeout","args","context","clearTimeout","setTimeout","apply","createElementFromHTML","htmlString","div","trim","firstChild","throttle","limit","lastFunc","lastRan","arguments","Date","now","initResize","Event","dispatchEvent","evt","createEvent","initUIEvent","getPercentOfView","element","viewTop","pageYOffset","viewBottom","elementTop","elementBottom","Math","round","getClosest","selector","Element","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","i","item","parentNode"],"mappings":"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","file":"utility.js","sourcesContent":["export function isInViewport(el) {\n  var rect = el.getBoundingClientRect();\n\n  return (\n    rect.bottom >= 0 &&\n    rect.right >= 0 &&\n    rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.left <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\n\nexport const isOutOfViewport = function (elem) {\n  // Get element's bounding\n  var bounding = elem.getBoundingClientRect();\n\n  // Check if it's out of the viewport on each side\n  const out: any = {};\n  out.top = bounding.top < 0;\n  out.left = bounding.left < 0;\n  out.bottom =\n    bounding.bottom >\n    (window.innerHeight || document.documentElement.clientHeight);\n  out.right =\n    bounding.right >\n    (window.innerWidth || document.documentElement.clientWidth);\n  out.any = out.top || out.left || out.bottom || out.right;\n  out.all = out.top && out.left && out.bottom && out.right;\n\n  return out;\n};\n\nexport function registerListener(event, func) {\n  if (document.addEventListener) {\n    document.addEventListener(event, func, true);\n  } else {\n    (document as any).attachEvent(\"on\" + event, func);\n  }\n}\n\nexport function removeListener(event, func) {\n  document.removeEventListener(event, func, true);\n}\n\nexport function isVisible(elem) {\n  const { width, height } = elem.getBoundingClientRect();\n\n  return !(height === width && height === 0);\n}\n\nexport function findDeepestChildElement(elem) {\n  return [].slice\n    .call(elem.querySelectorAll(\"*\"))\n    .find((e) => !(<any>e).children.length);\n}\n\nexport function createDocument(html, title) {\n  const doc = document.implementation.createHTMLDocument(title);\n  doc.documentElement.innerHTML = html;\n  return doc;\n}\n\nexport const escapeRegExp = (string) => {\n  return string.replace(/[*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n};\n\nexport function whichTransitionEvent() {\n  var t,\n    el = document.createElement(\"fakeelement\");\n\n  var transitions = {\n    transition: \"transitionend\",\n    OTransition: \"oTransitionEnd\",\n    MozTransition: \"transitionend\",\n    WebkitTransition: \"webkitTransitionEnd\",\n  };\n\n  for (t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\nexport function whichAnimationEvent() {\n  var t,\n    el = document.createElement(\"fakeelement\");\n\n  var animations = {\n    animation: \"animationend\",\n    OAnimationn: \"oAnimationnEnd\",\n    MozAnimationn: \"animationnend\",\n    WebkitAnimationn: \"webkitAnimationnEnd\",\n  };\n\n  for (t in animations) {\n    if (el.style[t] !== undefined) {\n      return animations[t];\n    }\n  }\n}\n\nexport function debounce(callback, wait) {\n  let timeout;\n  return (...args) => {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => callback.apply(context, args), wait);\n  };\n}\n\nexport function createElementFromHTML(htmlString) {\n  var div = document.createElement(\"div\");\n  div.innerHTML = htmlString.trim();\n\n  // Change this to div.childNodes to support multiple top-level nodes\n  return div.firstChild;\n}\n\nexport const throttle = (func, limit) => {\n  let lastFunc;\n  let lastRan;\n  return function () {\n    const context = this;\n    const args = arguments;\n    if (!lastRan) {\n      func.apply(context, args);\n      lastRan = Date.now();\n    } else {\n      clearTimeout(lastFunc);\n      lastFunc = setTimeout(function () {\n        if (Date.now() - lastRan >= limit) {\n          func.apply(context, args);\n          lastRan = Date.now();\n        }\n      }, limit - (Date.now() - lastRan));\n    }\n  };\n};\n\nexport const initResize = () => {\n  if (typeof Event === \"function\") {\n    // modern browsers\n    window.dispatchEvent(new Event(\"resize\"));\n  } else {\n    // for IE and other old browsers\n    // causes deprecation warning on modern browsers\n    const evt = window.document.createEvent(\"UIEvents\");\n    (<any>evt).initUIEvent(\"resize\", true, false, window, 0);\n    window.dispatchEvent(evt);\n  }\n};\n\nexport const dispatchEvent = (event) => {\n  if (typeof Event === \"function\") {\n    // modern browsers\n    window.dispatchEvent(new Event(event));\n  } else {\n    // for IE and other old browsers\n    // causes deprecation warning on modern browsers\n    const evt = window.document.createEvent(\"UIEvents\");\n    (<any>evt).initUIEvent(event, true, false, window, 0);\n    window.dispatchEvent(evt);\n  }\n};\n\n/**\n * @param {HTMLElement} element\n * @returns {number} percent of element in view\n */\nexport function getPercentOfView(element) {\n  const viewTop = window.pageYOffset;\n  const viewBottom = viewTop + window.innerHeight;\n  const rect = element.getBoundingClientRect();\n  const elementTop = rect.top + viewTop;\n  const elementBottom = elementTop + rect.height;\n\n  if (elementTop >= viewBottom || elementBottom <= viewTop) {\n    // heigher or lower than viewport\n    return 0;\n  } else if (elementTop <= viewTop && elementBottom >= viewBottom) {\n    // element is completely in viewport and bigger than viewport\n    return 100;\n  } else if (elementBottom <= viewBottom) {\n    if (elementTop < viewTop) {\n      // intersects viewport top\n      return Math.round(((elementBottom - viewTop) / window.innerHeight) * 100);\n    } else {\n      // completely inside viewport\n      return Math.round(\n        ((elementBottom - elementTop) / window.innerHeight) * 100\n      );\n    }\n  } else {\n    // intersects viewport bottom\n    //  elementBottom >= viewBottom && elementTop <= viewBottom\n    return Math.round(((viewBottom - elementTop) / window.innerHeight) * 100);\n  }\n}\n\n\nexport function getClosest (elem, selector) {\n\n\t// Element.matches() polyfill\n\tif (!Element.prototype.matches) {\n\t    Element.prototype.matches =\n\t        (<any>Element.prototype).matchesSelector ||\n\t        (<any>Element.prototype).mozMatchesSelector ||\n\t        (<any>Element.prototype).msMatchesSelector ||\n\t        (<any>Element.prototype).oMatchesSelector ||\n\t        (<any>Element.prototype).webkitMatchesSelector ||\n\t        function(s) {\n\t            var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n\t                i = matches.length;\n\t            while (--i >= 0 && matches.item(i) !== this) {}\n\t            return i > -1;\n\t        };\n\t}\n\n\t// Get the closest matching element\n\tfor ( ; elem && elem !== document; elem = elem.parentNode ) {\n\t\tif ( elem.matches( selector ) ) return elem;\n\t}\n\treturn null;\n\n};"]}