{"version":3,"sources":["tabs.ts"],"names":["FsLibrary","prototype","tabs","tabComponent","tabName","resetIx","cms","getMasterCollection","testimonials","slice","call","querySelectorAll","tabMenu","document","querySelector","tabContent","tabPane","children","tabLink","getElementsByTagName","Webflow","window","push","___toggledInitTab___","prefix","getPrefix","href","classList","remove","tabLinkClassNames","className","tabContentClassNames","innerHTML","Promise","all","initTabs","then","res","ready","reinitializeWebflow","map","element","index","name","newLink","getTabLink","classes","content","outerHTML","newPane","getTabPane","resolve","tab","pane","isFirst","classNames","tabIndex","val","match"],"mappings":"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","file":"tabs.js","sourcesContent":["import { FsLibrary } from \"./fsLibrary\";\n\nFsLibrary.prototype.tabs = function ({ tabComponent, tabName,resetIx=true }) {\n  const cms = this.getMasterCollection();\n  const testimonials = [].slice.call(cms.querySelectorAll(\".w-dyn-item>*\"));\n\n  const tabMenu = document.querySelector(tabComponent + \" .w-tab-menu\");\n  const tabContent = document.querySelector(tabComponent + \" .w-tab-content\");\n\n  const tabPane = tabContent.children[0];\n  const tabLink = tabMenu.getElementsByTagName(\"a\")[0];\n\n  const Webflow = (<any>window).Webflow || [];\n\n  Webflow.push(() =>{\n    if((<any>window).___toggledInitTab___){\n      return;\n    }\n\n    const prefix = getPrefix(tabLink.href);\n    tabLink.classList.remove(\"w--current\");\n    tabPane.classList.remove(\"w--tab-active\");\n\n    const tabLinkClassNames = tabLink.className;\n    const tabContentClassNames = tabPane.className;\n   \n    // clear tabMenu and tabContent\n\n    tabMenu.innerHTML = \"\";\n    tabContent.innerHTML = \"\";\n    Promise.all(initTabs(prefix, tabLinkClassNames, tabContentClassNames))\n    .then(res=>{\n      (<any>window).___toggledInitTab___=true;\n      (<any>window).Webflow.ready();\n      !!resetIx && this.reinitializeWebflow();\n \n    })\n\n  });\n\n  const initTabs = (prefix, tabLinkClassNames, tabContentClassNames) => {\n    // appends new contents\n    return testimonials.map((element, index) => {\n      const name = element.querySelector(tabName).innerHTML;\n\n      const newLink = getTabLink({\n        name,\n        prefix,\n        index,\n        classes: tabLinkClassNames,\n      });\n      tabMenu.innerHTML += newLink;\n\n      const content = element.outerHTML;\n      const newPane = getTabPane({\n        name,\n        prefix,\n        index,\n        classes: tabContentClassNames,\n        content,\n      });\n      tabContent.innerHTML += newPane;\n      return Promise.resolve()\n    });\n  };\n};\n\nconst getTabLink = ({ name, prefix, index, classes }) => {\n  const tab = prefix + \"-tab-\" + index;\n  const pane = prefix + \"-pane-\" + index;\n\n  const isFirst = index == 0;\n\n  let classNames = classes;\n  if (isFirst) {\n    classNames += \" w--current \";\n  }\n\n  const tabIndex = isFirst ? \"\" : `tabindex='-1'`;\n\n  return `<a data-w-tab=\"${name}\" class=\"${classNames}\" id=\"${tab}\" href=\"#${pane}\"\n   role=\"tab\"\n   aria-controls=\"${pane}\"\n   aria-selected=\"${isFirst}\" ${tabIndex}>\n            <div>${name}</div>\n          </a>`;\n};\n\nconst getTabPane = ({ name, prefix, index, content, classes }) => {\n  const tab = prefix + \"-tab-\" + index;\n  const pane = prefix + \"-pane-\" + index;\n\n  const isFirst = index == 0;\n\n  let classNames = classes;\n  if (isFirst) {\n    classNames += \" w--tab-active \";\n  }\n\n  return `<div data-w-tab=\"${name}\" class=\"${classNames}\" id=\"${pane}\" role=\"tabpanel\" aria-labelledby=\"${tab}\">\n${content}\n    </div>`;\n};\n\nconst getPrefix = (val) => {\n  return val.match(/(w-tabs-[0-9]{1}-data-w)/gi)[0];\n};\n"]}